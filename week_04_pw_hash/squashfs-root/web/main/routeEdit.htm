<script language="javascript" type="text/javascript">var opt=$.mainParam[0];var stk=$.mainParam[1];function init(){if(opt==1){var staticRteCfg=$.act(ACT_GET,L3_FORWARDING_ENTRY,stk,null,["destIPAddress","destSubnetMask","gatewayIPAddress","__ifType","enable"])}if(INCLUDE_IPV6){var wanIPList=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","name","connectionType","X_TP_IPv4Enabled"]);var wanPPPList=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","name","X_TP_IPv4Enabled","transportType","secondConnection"]);if(INCLUDE_L2TP){var wanL2TPList=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","name"])}if(INCLUDE_PPTP){var wanPPTPList=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","name"])}}else{var wanIPList=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","name","connectionType"]);var wanPPPList=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","name","transportType","secondConnection"]);if(INCLUDE_L2TP){var wanL2TPList=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","name"])}if(INCLUDE_PPTP){var wanPPTPList=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","name"])}}var sel=$.id("wanInf");var found=0;if(!$.exe()){var optionNull=$.c("option");optionNull.value="NULL";optionNull.text=if_str.NULL;try{sel.add(optionNull,null)}catch(e){sel.add(optionNull)}for(var j=0;j<wanPPPList.length;j++){if(wanPPPList[j].enable==1&&(wanPPPList[j].transportType!="PPP3G")&&(!INCLUDE_IPV6||wanPPPList[j].X_TP_IPv4Enabled==1)){var option=$.c("option");option.value="Internet";option.text=if_str.Internet;try{sel.add(option,null)}catch(e){sel.add(option)}if(wanPPPList[j].secondConnection!="sec_conn_disable"){var optionSec=$.c("option");optionSec.value="Public";optionSec.text=if_str.Public;try{sel.add(optionSec,null)}catch(e){sel.add(optionSec)}}found=1}}for(var i=0;i<wanIPList.length;i++){if(found==0&&(wanIPList[i].connectionType!="IP_Bridged")&&(wanIPList[i].enable==1)&&(!INCLUDE_IPV6||wanIPList[i].X_TP_IPv4Enabled==1)){var option=$.c("option");option.value="Internet";option.text=if_str.Internet;try{sel.add(option,null)}catch(e){sel.add(option)}}}if(INCLUDE_L2TP){for(var i=0;i<wanL2TPList.length;i++){if(wanL2TPList[i].enable==1){var option=$.c("option");option.value="Internet";option.text=if_str.Internet;try{sel.add(option,null)}catch(e){sel.add(option)}var optionSec=$.c("option");optionSec.value="Public";optionSec.text=if_str.Public;try{sel.add(optionSec,null)}catch(e){sel.add(optionSec)}}}}if(INCLUDE_PPTP){for(var i=0;i<wanPPTPList.length;i++){if(wanPPTPList[i].enable==1){var option=$.c("option");option.value="Internet";option.text=if_str.Internet;try{sel.add(option,null)}catch(e){sel.add(option)}var optionSec=$.c("option");optionSec.value="Public";optionSec.text=if_str.Public;try{sel.add(optionSec,null)}catch(e){sel.add(optionSec)}}}}var option=$.c("option");option.value="LAN";option.text=if_str.LAN;try{sel.add(option,null)}catch(e){sel.add(option)}if(opt==1){var ifIsInvaild=true;for(var i=0;i<sel.length;i++){if(staticRteCfg.__ifType==sel.options[i].value){ifIsInvaild=false;break}}if(ifIsInvaild==true){var option=$.c("option");option.value=staticRteCfg.__ifType;option.text=if_str[staticRteCfg.__ifType];try{sel.add(option,null)}catch(e){sel.add(option)}}$.id("desAddr").value=staticRteCfg.destIPAddress;$.id("mask").value=staticRteCfg.destSubnetMask;$.id("defGw").value=(staticRteCfg.gatewayIPAddress=="")?"0.0.0.0":staticRteCfg.gatewayIPAddress;$.id("wanInf").value=staticRteCfg.__ifType;$.id("state").value=staticRteCfg.enable}}}function doSave(){if($.ifip($.id("desAddr").value,true)){$.alert(ERR_IP_FORMAT);var element=$.id("desAddr");if(element){element.focus();element.select()}return false}if($.mask($.id("mask").value,true)){$.alert(ERR_MASK_INVAD);var element=$.id("mask");if(element){element.focus();element.select()}return false}if($.id("defGw").value==""||$.id("defGw").value=="0.0.0.0"){if($.id("wanInf").value=="null"){$.alert(ERR_INTERFACE_INVAD);var element=$.id("wanInf");if(element){element.focus();element.select()}return false}}else{if($.ifip($.id("defGw").value,true)){$.alert(ERR_IP_FORMAT);var element=$.id("defGw");if(element){element.focus();element.select()}return false}}var staticRteAttrs={};staticRteAttrs.destIPAddress=$.ip2ip($.id("desAddr").value);staticRteAttrs.destSubnetMask=$.ip2ip($.id("mask").value);staticRteAttrs.gatewayIPAddress=($.id("defGw").value==""||$.id("defGw").value=="0.0.0.0")?"":$.ip2ip($.id("defGw").value);staticRteAttrs.__ifType=$.id("wanInf").value;staticRteAttrs.enable=$.id("state").value;if(opt==0){$.act(ACT_ADD,L3_FORWARDING_ENTRY,null,null,staticRteAttrs)}else{if(opt==1){$.act(ACT_SET,L3_FORWARDING_ENTRY,stk,null,staticRteAttrs)}}$.addLoading($.id("saveBtn"));$.exe(function(err){if(!err){$.loadMain("route.htm")}})};</script>
<p class="et T" id="et">Static Route</p>
<div class="con1 L">
<p class="ct"></p>
<p class="bl"></p>
<div class="con2">

<p class="L1"><b class="item M T" id="t_dstip">Destination IP Address:</b><input type="text" class="text" id="desAddr" size="17"  maxlength="15" /></p>
<p class="L1"><b class="item M T T_netmask">Subnet Mask:</b><input type="text" class="text" id="mask" size="17"  maxlength="15" /></p>
<p class="L1"><b class="item M T T_gateway">Gateway:</b><input type="text" class="text" id="defGw" size="17"  maxlength="15" /></p>
<p class="L1"><b class="item M T T_intf">Interface:</b><select class="XL" id="wanInf"></select><span class="T T_optional">(optional)</span></p>
<p class="L1"><b class="item M T T_status">Status:</b><select class="XL" id="state">
<option value="1" class="T T_enabled" id="state_en">Enabled</option>
<option value="0" class="T T_disabled" id="state_dis">Disabled</option>
</select></p>
</div>
<p class="bl"></p>
<p class="tail" id="tail">
<input type="button" class="button L T T_save" id="saveBtn" value="Save" onclick="doSave();" />
<input type="button" class="button L T T_back" value="Back" onclick="$.loadMain('route.htm')"/>
</p>
</div>
<script language="javascript" type="text/javascript">$.loadHelp();init();</script>