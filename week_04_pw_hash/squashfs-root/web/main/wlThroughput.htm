<script type="text/javascript" language="javascript">var runState=0;var total_time=0,dotNum,maxY;var format=new Array(0,"bps");var formatArray=new Array();var dot=new Array();var i;var Rates=new Array(0,0,0,0,0,0);var maxTxRate=0,minTxRate=0,aveTxRate=0,maxRxRate=0,minRxRate=0,aveRxRate=0;var ratesFormatArray=new Array(0,"bps");var WlanThroughputPara=new Array(0,0);var t1;for(i=0;i<21;i++){dot[i]=new Array()}function initInfo(){var i,j;for(i=0;i<21;i++){formatArray[i]=0;for(j=0;j<6;j++){dot[i][j]=0}}total_time=0;format=[0,"bps"]}function setRatesInfo(time){var maxRate;var i,j;if(1>=total_time){maxTxRate=minTxRate=aveTxRate=dot[time][0];maxRxRate=minRxRate=aveRxRate=dot[time][1]}else{if(maxTxRate<dot[time][0]){maxTxRate=dot[time][0]}if(maxRxRate<dot[time][1]){maxRxRate=dot[time][1]}if(minTxRate>dot[time][0]){minTxRate=dot[time][0]}if(minRxRate>dot[time][1]){minRxRate=dot[time][1]}aveTxRate+=((dot[time][0]-aveTxRate)/total_time);aveRxRate+=((dot[time][1]-aveRxRate)/total_time)}Rates[0]=maxTxRate;Rates[1]=maxRxRate;Rates[2]=minTxRate;Rates[3]=minRxRate;Rates[4]=aveTxRate;Rates[5]=aveRxRate;maxRate=(maxTxRate>maxRxRate)?maxTxRate:maxRxRate;ratesFormatArray=getRateFormat(maxRate);for(j=0;j<6;j++){for(i=1;i<=ratesFormatArray[0];i++){Rates[j]/=1024}Rates[j]=Math.floor(Rates[j]*10000)/10000}}function getRateFormat(rate){var times=0;var format=new Array();while(rate>1023){rate/=1024;times++}switch(times){case 0:format[1]="bps";format[0]=0;break;case 1:format[1]="Kbps";format[0]=1;break;case 2:format[1]="Mbps";format[0]=2;break;case 3:format[1]="Gbps";format[0]=3;break;default:format[0]=0;format[1]="error";break}return format}function getRateScale(num){var scale,temp;temp=maxY/num;scale=(temp-temp%1)+1;return scale}function getMaxValue(valueArray){var length,max=0;length=valueArray.length-1;for(;length>=0;length--){if(valueArray[length]>max){max=valueArray[length]}}return max}function updateDotsInfo(txBytes,rxBytes){var i,j;var time_now,time_last;var _format=new Array();var tempArray=new Array();var max;time_now=total_time%21;dotNum=(total_time>20)?21:(time_now+1);time_last=time_now-1;if(time_last<0){time_last+=21}dot[time_now][4]=txBytes;dot[time_now][5]=rxBytes;dot[time_now][0]=(dot[time_now][4]-dot[time_last][4])*2;dot[time_now][1]=(dot[time_now][5]-dot[time_last][5])*2;max=(dot[time_now][1]>dot[time_now][0])?dot[time_now][1]:dot[time_now][0];_format=getRateFormat(max);formatArray[time_now]=_format[0];max=getMaxValue(formatArray);if(_format[0]==max){format=_format}if(_format[1]=="error"){alert(js_throughput_error="THROUGHPUT ERROR OCCUR!");total_time=0;runState=0;return}if(dot[time_now][0]<0||dot[time_now][1]<0){dot[time_now][0]=dot[time_last][0];dot[time_now][1]=dot[time_last][1]}if(0==total_time){dot[0][0]=0;dot[0][1]=0;format=[0,"bps"];formatArray[0]=[0,"bps"]}for(i=0;i<=format[0];i++){for(j=0;j<dotNum;j++){if(i==0){dot[j][2]=dot[j][0];dot[j][3]=dot[j][1]}else{dot[j][2]/=1024;dot[j][3]/=1024}tempArray[j]=(dot[j][2]>dot[j][3])?dot[j][2]:dot[j][3]}}maxY=getMaxValue(tempArray);setRatesInfo(time_now)}function startTraffic(){clearTimeout(t1);initInfo();runState=1;drawLine("#000000",50,300,450,300,true);drawLine("#ffffff",50,301,450,301,true);drawLine("#ffffff",50,302,450,302,true);doPage()}function stopTraffic(){clearTimeout(t1);runState=0}function drawDot(x,y,color,size){size+="px";document.write("<table border='0' cellspacing=0 cellpadding=0><tr><td style='position: absolute; left: "+(x)+"; top: "+(y)+";background-color: "+color+"' width="+size+" height="+size+"></td></tr></table>")}function drawLineExpert(color,x1,y1,x2,y2){var i;var r=Math.floor(Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)));var theta=Math.atan((x2-x1)/(y2-y1));if(((y2-y1)<0&&(x2-x1)>0)||((y2-y1)<0&&(x2-x1)<0)){theta=Math.PI+theta}var dx=Math.sin(theta);var dy=Math.cos(theta);context.strokeStyle=color;context.beginPath();for(i=0;i<r;i++){context.moveTo(x1+i*dx,y1+i*dy);context.lineTo(x1+(i+1)*dx,y1+(i+1)*dy)}context.stroke()}function drawLine(color,x1,y1,x2,y2,adv){if(!adv){context.strokeStyle=color;context.beginPath();context.moveTo(x1,y1);context.lineTo(x2,y2);context.stroke()}else{drawLineExpert(color,x1,y1,x2,y2)}}function getBeveling(x,y){return Math.sqrt(Math.pow(x,2)+Math.pow(y,2))}function drawDashLine(color,x1,y1,x2,y2,dashLen){dashLen=dashLen==undefined?5:dashLen;var beveling=getBeveling(x2-x1,y2-y1);var num=Math.floor(beveling/dashLen);context.strokeStyle=color;context.beginPath();for(var i=0;i<num;i++){context[i%2==0?"moveTo":"lineTo"](x1+(x2-x1)/num*i,y1+(y2-y1)/num*i)}context.stroke()}function clearPrevDraw(){context.clearRect(50,50,400,250);context.strokeStyle="#000000";context.strokeRect(50,50,400,250);context.fillStyle="#000000";context.textAlign="end";for(i=0;i<=10;i++){context.fillText(i,40,300-i*23)}for(i=1;i<=10;i++){drawDashLine("grey",50,50+i*23,450,50+i*23,2);if(i!=10){drawDashLine("grey",50+i*40,50,50+i*40,300,2)}drawDashLine("grey",30+i*40,50,30+i*40,300,2)}}function doDrawFunc(){var i,j,k;var temp,elem;var x0=30,y0,x1,y1;scale=getRateScale(10);temp=total_time%21+2;for(i=1;i<dotNum;i++){x0+=20;x1=x0+20;if(dotNum==21){j=temp%21;temp++}else{j=i}k=(j==0)?20:(j-1);y0=301-((dot[k][2]/scale)*23);y1=301-((dot[j][2]/scale)*23);drawLine("#0099FF",x0,y0,x1,y1,true);y0=299-((dot[k][3]/scale)*23);y1=299-((dot[j][3]/scale)*23);drawLine("#9900FF",x0,y0,x1,y1,true)}updateYScale(scale);i=total_time%21;y0=Math.floor(dot[i][2]*10000)/10000;y1=Math.floor(dot[i][3]*10000)/10000;elem=document.getElementById("t_ltx_rate");elem.innerHTML=y0+format[1]+"&nbsp;&nbsp;&nbsp;&nbsp;";elem=document.getElementById("t_lrx_rate");elem.innerHTML=y1+format[1]+"&nbsp;&nbsp;&nbsp;&nbsp;";elem=document.getElementById("t_ltx_max");elem.innerHTML=Rates[0]+ratesFormatArray[1]+"&nbsp;&nbsp;";elem=document.getElementById("t_lrx_max");elem.innerHTML=Rates[1]+ratesFormatArray[1]+"&nbsp;&nbsp;";elem=document.getElementById("t_ltx_min");elem.innerHTML=Rates[2]+ratesFormatArray[1]+"&nbsp;&nbsp;";elem=document.getElementById("t_lrx_min");elem.innerHTML=Rates[3]+ratesFormatArray[1]+"&nbsp;&nbsp;";elem=document.getElementById("t_ltx_average");elem.innerHTML=Rates[4]+ratesFormatArray[1]+"&nbsp;&nbsp;";elem=document.getElementById("t_lrx_average");elem.innerHTML=Rates[5]+ratesFormatArray[1]+"&nbsp;&nbsp;";elem=document.getElementById("t_ltime_unit");elem.innerHTML=(total_time*4)+"&nbsp;s";elem=document.getElementById("t_lrate_unit");elem.innerHTML=format[1];total_time++}function updateYScale(scale){var i;for(i=0;i<=10;i++){context.clearRect(40,300-i*23,-40,-20);context.fillText(i*scale,40,300-i*23)}}function updateWlanPara(time){wlan=$.io("/cgi/updateWlThroughput",false);wlan=wlan.split(":");if(wlan==""){WlanThroughputPara=new Array(0,0);return}for(var i=0;i<2;i++){WlanThroughputPara[i]=parseInt(wlan[i],10)}}function doPage(){updateWlanPara(4000);updateDotsInfo(WlanThroughputPara[0],WlanThroughputPara[1]);clearPrevDraw();doDrawFunc();if(runState){t1=window.setTimeout("doPage()",4000)}}function Click(){window.event.returnValue=false}document.oncontextmenu=Click;$.loadHelpFrame("WlanThroughputHelpRpm.htm");</script>
<p class="et T" id="et">Throughput Monitor</p>
<div class="con1 M">
<p class="ct"></p>
<p class="bl"></p>
<div class="con2">
<table>
	<tr>
		<div style="font-size: 14px;">
		<center>
		<span id = "t_rate">Rate:</span>
		<span name = "t_lrate_unit" id = "t_lrate_unit">bps</span>
		<p class="br"></p>
		<span id = "t_time">Run Time:</span>
		<span name = "t_ltime_unit" id = "t_ltime_unit">0s</span>
		</center>
		</div>
		<canvas id="drawing" width="520" height="320" style="display: block;margin: 0 auto;"></canvas>
		<table border='0' cellspacing=0 height ="2px">
		<tr><td></td><td class="title" id = "t_cur">Current</td><td class="title" id = "t_max">Max</td><td class="title" id = "t_min">Min</td><td class="title" id = "t_average">Average</td></tr>
		<tr><td id = "t_tx">Transmit</td><td style = "FONT-SIZE: 12px; " id = "t_ltx_rate">0bps&nbsp;&nbsp;&nbsp;&nbsp;</td><td style = "FONT-SIZE: 12px;" id = "t_ltx_max">0bps&nbsp;&nbsp;</td><td style = "FONT-SIZE: 12px;" id = "t_ltx_min">0bps&nbsp;&nbsp;</td><td style = "FONT-SIZE: 12px;" id = "t_ltx_average">0bps&nbsp;&nbsp;</td></tr>
		<TR><TD colspan=3></TD></TR>
		<tr><td id = "t_rx">Receive</td><td style = "FONT-SIZE: 12px; " id = "t_lrx_rate">0bps&nbsp;&nbsp;&nbsp;&nbsp;</td><td style = "FONT-SIZE: 12px;" id = "t_lrx_max">0bps&nbsp;&nbsp;</td><td style = "FONT-SIZE: 12px;" id = "t_lrx_min">0bps&nbsp;&nbsp;</td><td style = "FONT-SIZE: 12px;" id = "t_lrx_average">0bps&nbsp;&nbsp;</td></tr>
		</table>
	</tr>                     
</table>
</div>
<p class="bl"></p>
<p class="tail">
<input type='button' class="button L T T_start" id="watch_start" name="watch_start" onClick = "startTraffic();">
<input type="button" class="button L T T_stop" id="watch_stop" name = "watch_stop"  onClick = "stopTraffic();">
</p>
</div>

<script type="text/javascript" language="javascript">var drawing=document.getElementById("drawing");var context=drawing.getContext("2d");clearPrevDraw();</script>