<script language="javascript" type="text/javascript">function initEditPPPoE(){var wan_ppplist=$.wd.conn[$.wd.editIndex].obj;$.loadHelp("pppoe_h.htm");$.id("username").value=wan_ppplist.username;$.id("pwd").value=wan_ppplist.password;$.id("pwd2").value=wan_ppplist.password;if(INCLUDE_SPECIAL_DIAL_MODE){$.id("speDail").value=wan_ppplist.X_TP_SpecialDail}if(wan_ppplist.connectionTrigger=="OnDemand"){$.id("connOnDemand").checked=1;$.id("idleTime").value=wan_ppplist.idleDisconnectTime}else{if(wan_ppplist.connectionTrigger=="AlwaysOn"){$.id("connAlwaysOn").checked=1}else{if(wan_ppplist.connectionTrigger=="Manual"){$.id("connManual").checked=1;$.id("idleTime").value=wan_ppplist.idleDisconnectTime}}}$.id("ppp_authpro").value=wan_ppplist.PPPAuthenticationProtocol;$.id("acName").value=wan_ppplist.PPPoEACName;$.id("serviceName").value=wan_ppplist.PPPoEServiceName;$.id("pppmtu").value=wan_ppplist.maxMRUSize;$.id("ppp_fullnat_en").checked=(wan_ppplist.X_TP_FullconeNATEnabled==1)?1:0;$.id("ppp_spi_en").checked=(wan_ppplist.X_TP_FirewallEnabled==1)?1:0;$.id("ppp_igmp_en").checked=(wan_ppplist.X_TP_IGMPProxyEnabled==1)?1:0;if(wan_ppplist.X_TP_UseStaticIP==1){$.id("externIp_en").checked=1;$.removeClass($.id("exIp_tbl"),"nd");$.id("externIpAddr").value=wan_ppplist.externalIPAddress}else{$.id("externIp_en").checked=0;$.addClass($.id("exIp_tbl"),"nd")}$.id("ppp_echotime").value=wan_ppplist.PPPLCPEcho?wan_ppplist.PPPLCPEcho:0;if(wan_ppplist.DNSOverrideAllowed==1){$.id("dns_en").checked=1;$.removeClass($.id("dns_tbl"),"nd");$.id("dns1").value=(wan_ppplist.DNSServers.split(",")[0])?wan_ppplist.DNSServers.split(",")[0]:"0.0.0.0";$.id("dns2").value=(wan_ppplist.DNSServers.split(",")[1])?wan_ppplist.DNSServers.split(",")[1]:"0.0.0.0"}else{$.id("dns_en").checked=0;$.addClass($.id("dns_tbl"),"nd")}if(INCLUDE_IPV6){$.id("pppoe_enable_v4").checked=(wan_ppplist.X_TP_IPv4Enabled==1)?1:0;enablePPPoEIPv4();$.id("pppoe_enable_v6").checked=(wan_ppplist.X_TP_IPv6Enabled==1)?1:0;enablePPPoEIPv6();$.id("externIp6_en").checked=(wan_ppplist.X_TP_IPv6AddressingType=="Static")?1:0;showDiv("externIp6_en");$.id("dns6_en").checked=(wan_ppplist.X_TP_IPv6DNSOverrideAllowed==1)?1:0;showDiv("dns6_en");if(wan_ppplist.X_TP_IPv6AddressingType=="Static"){$.id("externIp6Addr").value=wan_ppplist.X_TP_ExternalIPv6Address;$.id("externIp6Gateway").value=wan_ppplist.X_TP_DefaultIPv6Gateway}if(wan_ppplist.X_TP_IPv6DNSOverrideAllowed==1){$.id("dns6_1").value=(wan_ppplist.X_TP_IPv6DNSServers.split(",")[0])?wan_ppplist.X_TP_IPv6DNSServers.split(",")[0]:"::";$.id("dns6_2").value=(wan_ppplist.X_TP_IPv6DNSServers.split(",")[1])?wan_ppplist.X_TP_IPv6DNSServers.split(",")[1]:"::"}if(INCLUDE_IPV6_SLAAC){$.id("pppoe_ip6_addr_type_opt").selectedIndex=(wan_ppplist.X_TP_IPv6AddressingType!="SLAAC")?0:1}if(INCLUDE_IPV6_MLD){$.id("ppp_mld_en").checked=(wan_ppplist.X_TP_MLDProxyEnabled==1)?1:0}}}function initPPPoE(){showPPPoE();if($.wd.conn[$.wd.editIndex].type=="pppoe"){initEditPPPoE()}dftGtw=$.id("defaut_gateway_pppoe");if(INCLUDE_IPV6){dftGtw6=$.id("default_gateway_pppoe6")}initDefaultGwDNS()}function showPPPoE(){if(INCLUDE_IPV6){showIPv6();$.id("pppoe_enable_v4").checked=1;enablePPPoEIPv4();$.id("pppoe_enable_v6").checked=0;enablePPPoEIPv6()}$.removeClass($.id("pppoe_elem_basic"),"nd");$.removeClass($.id("pppoeClick"),"nd");$.removeClass($.id("pppoeClick"),"cln");$.addClass($.id("pppoe_elem_adv"),"nd");$.loadHelp("pppoe_h.htm")}function enablePPPoEIPv4(){if($.id("pppoe_enable_v4").checked==1){$.removeClass($.id("pppoe_basic_v4"),"nd");$.removeClass($.id("pppoe_adv_v4"),"nd");$.id("connOnDemand").disabled=false;$.id("connManual").disabled=false}else{$.addClass($.id("pppoe_basic_v4"),"nd");$.addClass($.id("pppoe_adv_v4"),"nd");if($.id("pppoe_enable_v6").checked==1){$.id("connAlwaysOn").checked=true;$.id("connOnDemand").disabled=true;$.id("connManual").disabled=true}}}function enablePPPoEIPv6(){if($.id("pppoe_enable_v6").checked==1){$.removeClass($.id("pppoe_basic_v6"),"nd");$.removeClass($.id("pppoe_adv_v6"),"nd");if($.id("pppoe_enable_v4").checked==0){$.id("connAlwaysOn").checked=true;$.id("connOnDemand").disabled=true;$.id("connManual").disabled=true}}else{$.addClass($.id("pppoe_basic_v6"),"nd");$.addClass($.id("pppoe_adv_v6"),"nd");if($.id("pppoe_enable_v4").checked==1){$.id("connOnDemand").disabled=false;$.id("connManual").disabled=false}}if(INCLUDE_IPV6_SLAAC){$.removeClass($.id("pppoe_ip6_addr_type"),"nd")}else{$.addClass($.id("pppoe_ip6_addr_type"),"nd")}if(INCLUDE_IPV6_MLD){$.removeClass($.id("pppoe_mld"),"nd")}else{$.addClass($.id("pppoe_mld"),"nd")}}function PPPoEClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("pppoe_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("pppoe_elem_adv"),"nd");$.addClass(obj,"cln")}}function showDiv(val){switch(val){case"externIp_en":if($.id("externIp_en").checked==1){$.removeClass($.id("exIp_tbl"),"nd")}else{$.addClass($.id("exIp_tbl"),"nd")}break;case"dns_en":if($.id("dns_en").checked==1){$.removeClass($.id("dns_tbl"),"nd")}else{$.addClass($.id("dns_tbl"),"nd")}break;case"externIp6_en":if(INCLUDE_IPV6){if($.id("externIp6_en").checked==1){$.removeClass($.id("exIp6_tbl"),"nd");if(INCLUDE_IPV6_SLAAC){$.id("pppoe_ip6_addr_type_opt").disabled=1}}else{$.addClass($.id("exIp6_tbl"),"nd");if(INCLUDE_IPV6_SLAAC){$.id("pppoe_ip6_addr_type_opt").disabled=0}}}break;case"dns6_en":if(INCLUDE_IPV6){if($.id("dns6_en").checked==1){$.removeClass($.id("dns6_tbl"),"nd")}else{$.addClass($.id("dns6_tbl"),"nd")}}break;default:}}function addPPPoEAttrs(){var element;wanArg.enable=1;if($.id("username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("username");if(element){element.focus();element.select()}return false}wanArg.username=$.id("username").value;if(INCLUDE_SPECIAL_DIAL_MODE){wanArg.X_TP_SpecialDail=$.id("speDail").value}if($.id("pwd").value!=$.id("pwd2").value){$.id("pwd").value="";$.id("pwd2").value="";$.alert(ERR_PWD_INVAD);element=$.id("pwd");if(element){element.focus();element.select()}return false}wanArg.password=$.id("pwd").value;if($.id("connAlwaysOn").checked==1){wanArg.connectionTrigger="AlwaysOn"}else{if(($.id("idleTime").value)&&($.isnum($.id("idleTime").value))){wanArg.idleDisconnectTime=parseInt($.id("idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("idleTime");if(element){element.focus();element.select()}return false}if($.id("connOnDemand").checked==1){wanArg.connectionTrigger="OnDemand"}else{if($.id("connManual").checked==1){wanArg.connectionTrigger="Manual"}}}wanArg.PPPAuthenticationProtocol=$.id("ppp_authpro").value;wanArg.PPPoEACName=$.id("acName").value;wanArg.PPPoEServiceName=$.id("serviceName").value;if(($.id("pppmtu").value>=576)&&($.id("pppmtu").value<=1492)){wanArg.maxMRUSize=parseInt($.id("pppmtu").value,10)}else{$.alert(ERR_WAN_PPPOE_MTU_INVAD);element=$.id("pppmtu");if(element){element.focus();element.select()}return false}wanArg.NATEnabled=1;wanArg.connectionType="IP_Routed";wanArg.transportType="PPPoE";wanArg.X_TP_FullconeNATEnabled=($.id("ppp_fullnat_en").checked==1)?1:0;wanArg.X_TP_FirewallEnabled=($.id("ppp_spi_en").checked==1)?1:0;wanArg.X_TP_IGMPProxyEnabled=($.id("ppp_igmp_en").checked==1)?1:0;if($.id("externIp_en").checked==1&&(!INCLUDE_IPV6||$.id("pppoe_enable_v4").checked==1)){if(($.id("externIpAddr").value!="")&&($.id("externIpAddr").value!="0.0.0.0")&&($.ifip($.id("externIpAddr").value,true))){$.alert(ERR_IP_FORMAT);element=$.id("externIpAddr");if(element){element.focus();element.select()}return false}wanArg.externalIPAddress=($.id("externIpAddr").value)?$.ip2ip($.id("externIpAddr").value):"0.0.0.0";wanArg.X_TP_UseStaticIP=1}else{if($.id("externIp_en").checked==0){if($.wd.conn[$.wd.editIndex].type==null){wanArg.externalIPAddress="0.0.0.0"}wanArg.X_TP_UseStaticIP=0}}if((parseInt($.id("ppp_echotime").value,10)>=0)&&(parseInt($.id("ppp_echotime").value,10)<=120)){wanArg.PPPLCPEcho=parseInt($.id("ppp_echotime").value,10)}else{$.alert(ERR_WAN_ECHOTIME_INVAD);element=$.id("ppp_echotime");if(element){element.focus();element.select()}return false}if($.id("dns_en").checked==1&&(!INCLUDE_IPV6||$.id("pppoe_enable_v4").checked==1)){if(($.id("dns1").value!="")&&($.id("dns1").value!="0.0.0.0")&&($.ifip($.id("dns1").value,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns1");if(element){element.focus();element.select()}return false}if(($.id("dns2").value!="")&&($.id("dns2").value!="0.0.0.0")&&($.ifip($.id("dns2").value,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("dns2");if(element){element.focus();element.select()}return false}var tmpDns1=($.id("dns1").value)?$.ip2ip($.id("dns1").value):"0.0.0.0";var tmpDns2=($.id("dns2").value)?$.ip2ip($.id("dns2").value):"0.0.0.0";wanArg.DNSOverrideAllowed=1;wanArg.DNSServers=tmpDns1+","+tmpDns2}else{wanArg.DNSOverrideAllowed=0;if($.wd.conn[$.wd.editIndex].type==null){wanArg.DNSServers="0.0.0.0,0.0.0.0"}}if($.wd.conn[$.wd.editIndex].type=="pppoe"){$.wd.l3ForwardingObj.__ifAliasName=dftGtw.options[dftGtw.selectedIndex].text}if(INCLUDE_IPV6){wanArg.X_TP_IPv4Enabled=($.id("pppoe_enable_v4").checked==1)?1:0;wanArg.X_TP_IPv6Enabled=($.id("pppoe_enable_v6").checked==1)?1:0;if(wanArg.X_TP_IPv4Enabled==0&&wanArg.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}if(wanArg.X_TP_IPv6Enabled==1&&$.id("externIp6_en").checked==1){if(!isValidGLUIP6AddrStrict($.id("externIp6Addr").value)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("externIp6Addr");if(element){element.focus();element.select()}return false}var tmp_ip6Gateway=$.id("externIp6Gateway").value;if(tmp_ip6Gateway!=""&&tmp_ip6Gateway!="::"&&!isValidGLUIP6AddrStrict(tmp_ip6Gateway)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("externIp6Gateway");if(element){element.focus();element.select()}return false}wanArg.X_TP_IPv6AddressingType="Static";wanArg.X_TP_ExternalIPv6Address=$.id("externIp6Addr").value;wanArg.X_TP_PrefixLength=64;wanArg.X_TP_DefaultIPv6Gateway=(tmp_ip6Gateway)?tmp_ip6Gateway:"::";wanArg.X_TP_DefaultIPv6GatewayOverride=(wanArg.X_TP_DefaultIPv6Gateway!="::")?1:0}else{wanArg.X_TP_IPv6AddressingType="DHCPv6";if(INCLUDE_IPV6_SLAAC){if($.id("pppoe_ip6_addr_type_opt").value=="slaac"){wanArg.X_TP_IPv6AddressingType="SLAAC"}}if($.wd.conn[$.wd.editIndex].type==null){wanArg.X_TP_ExternalIPv6Address="::";wanArg.X_TP_PrefixLength=0;wanArg.X_TP_DefaultIPv6Gateway="::"}}if(INCLUDE_IPV6_MLD){wanArg.X_TP_MLDProxyEnabled=$.id("ppp_mld_en").checked?1:0}if(wanArg.X_TP_IPv6Enabled==1&&$.id("dns6_en").checked==1){var tmpDns1=$.id("dns6_1").value;var tmpDns2=$.id("dns6_2").value;if(tmpDns1!=""&&tmpDns1!="::"&&!isValidGLUIP6AddrStrict(tmpDns1)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_1");if(element){element.focus();element.select()}return false}if(tmpDns2!=""&&tmpDns2!="::"&&!isValidGLUIP6AddrStrict(tmpDns2)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_2");if(element){element.focus();element.select()}return false}tmpDns1=(tmpDns1)?tmpDns1:"::";tmpDns2=(tmpDns2)?tmpDns2:"::";if((tmpDns1+","+tmpDns2)=="::,::"){$.alert(ERR_WAN6_DNS_INVAD);element=$.id("dns6_1");if(element){element.focus();element.select()}return false}wanArg.X_TP_IPv6DNSOverrideAllowed=1;wanArg.X_TP_IPv6DNSServers=tmpDns1+","+tmpDns2}else{wanArg.X_TP_IPv6DNSOverrideAllowed=0;if($.wd.conn[$.wd.editIndex].type==null){wanArg.X_TP_IPv6DNSServers="::,::"}}if($.wd.conn[$.wd.editIndex].type=="pppoe"){$.wd.l3Ip6ForwardingObj.__ifAliasName=dftGtw6.options[dftGtw6.selectedIndex].text}}return true}function checkPwd(val){if(val=="pppoe"){if($.id("pwd2").value!=$.id("pwd").value){$.id("pwd").value="";$.id("pwd2").value="";$.alert(ERR_PWD_INVAD);element=$.id("pwd");if(element){element.focus();element.select()}return}}};</script>

	<div id="pppoe_elem_basic" class="nd">
	<p class="L1"></p>
	<p><b class="item L T T_pppusr">PPP Username:</b><input type="text" class="text" size="15" id="username" maxlength="63" /></p>
	<p><b class="item L T T_ppppwd">PPP Password:</b><input type="password" class="text" size="15" id="pwd" maxlength="63" /></p>
	<p><b class="item L T T_cfmpwd">Confirm Password:</b><input type="password" class="text" size="15" id="pwd2" maxlength="63" onchange="checkPwd('pppoe');"/></p>
	<p class="nd"><b class="item L" id="t_speDial">Special Dial:</b><select id="speDail" onchange="">
	<option id="dail0" value=0 selected >Normal dial mode</option>
	<option id="dail1" value=1>Special dial mode 1</option>
	<option id="dail2" value=2>Special dial mode 2</option>
	<option id="dail3" value=3>Special dial mode 3</option>
	<option id="dail4" value=4>Special dial mode 4</option>
	<option id="dail5" value=5>Special dial mode 5</option>
	<option id="dail6" value=6>Special dial mode 6</option>
	<option id="dail7" value=7>Special dial mode 7</option>
	</select></p>
	<p class="br"></p>
	<p class="L1"><b class="item T T_connmode">Connection Mode:</b><input type="radio" name="linkMode" id="connAlwaysOn" checked /> <span class="T T_typeauto">Always on</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="connOnDemand" /> <span class="T T_typedemand">Connect on demand</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="connManual"/> <span class="T T_typemanual">Connect manually</span></p>
	<p><b class="item">&nbsp;</b><span class="T T_midle">Max Idle Time:</span> <input type="text" class="text" id="idleTime" size="3" maxlength="2" value="15"/> <span class="T T_minutes">minutes</span> <span class="T T_zmean">(0 means remain active at all time)</span></p>
	<p class="br"></p>
	<p><b class="item L T T_authtype">Authentication Method:</b><select id="ppp_authpro" class="L">
	<option id="auto_auth" value="AUTO_AUTH" selected>AUTO_AUTH</option>
	<option id="pap" value="PAP">PAP</option>
	<option id="chap" value="CHAP">CHAP</option>
	<option id="ms-chap" value="MS-CHAP">MS-CHAP</option>
	</select></p>

	<p class="br IPv6 nd"></p>
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" id="pppoe_enable_v4" onclick="enablePPPoEIPv4();" /></p>
	<div id="pppoe_basic_v4">
		<p class="br"></p>
		<p><b class="item L T T_defgw">Default Gateway:</b><select id="defaut_gateway_pppoe" class="L"></select></p>
	</div>
	
	<p class="br IPv6 nd"></p>
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" id="pppoe_enable_v6" onclick="enablePPPoEIPv6();" /></p>
	<div id="pppoe_basic_v6">
		<div id="pppoe_ip6_addr_type">
			<p class="IPv6 nd"><b class="item L T T_ip6addrconf">Addressing Type</b>
			<select id="pppoe_ip6_addr_type_opt" class="L">
			<option value="dhcpv6" selected="selected">DHCPv6</option>
			<option value="slaac">SLAAC</option>
			</select></p>
		</div>
		<p class="br IPv6 nd"></p>
		<p class="IPv6 nd"><b class="item L T T_ip6defgw">IPv6 Default Gateway:</b><select id="default_gateway_pppoe6" class="L"></select></p>
	</div>
	</div>

	<p class="br"></p>
	
<div class="cl nd" id="pppoeClick" onclick="PPPoEClick(this)"><p class="cl"></p></div>
<div id="pppoe_elem_adv" class="nd">
	<p><b class="item L T T_srvname">Service Name:</b><input type="text" class="text" size="15" id="serviceName" maxlength="31" /> (<span class="T T_nochg">do not change unless necessary</span>)</p>
	<p><b class="item L T T_acname">Server Name:</b><input type="text" class="text" size="15" id="acName" maxlength="31" /> (<span class="T T_nochg">do not change unless necessary</span>)</p>
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="pppmtu" size="5" maxlength="4" value="1480"/> (<span class="T T_mtu1480">1480 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="pppoe_adv_v4">
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="ppp_fullnat_en" />&nbsp;</p>
		<p><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="ppp_spi_en" />&nbsp;</p>
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="ppp_igmp_en" checked="true" />&nbsp;</p>
		<p><b class="item L T T_useispaddr">Use IP address specified by ISP</b><input type="checkbox" id="externIp_en" onclick="showDiv('externIp_en');"/>&nbsp;</p>
		<p id="exIp_tbl" class="nd"><b class="item L T T_ispaddr">ISP specified IP Address:</b><input type="text" class="text" size="15" value="0.0.0.0" id="externIpAddr"/></p>
		<p><b class="item L T T_echo">Echo request interval:</b><input type="text" class="text" size="5" id="ppp_echotime" maxlength="3" value="30"/> <span class="T T_echoinfo">(0~120 seconds, 0 means no request)</span></p>
		<p><b class="item L T T_dnsmanual">Set DNS server manually</b><input type="checkbox" id="dns_en" onclick="showDiv('dns_en');"/>&nbsp;</p>
		<div id="dns_tbl" class="nd">
			<p><b class="item L T T_dns">DNS server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dns1"/></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dns2"/></p>
		</div>
	</div>
	<div id="pppoe_adv_v6">
		<p class="br IPv6 nd"></p>
		<div id="pppoe_mld">
			<p class="IPv6 nd"><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="ppp_mld_en" checked="true" />&nbsp;</p>
		</div>
		<p class="IPv6 nd"><b class="item L1 T T_ip6useispaddr">Use IPv6 address specified by ISP</b><input type="checkbox" id="externIp6_en" onclick="showDiv('externIp6_en');"/></p>
		<div id="exIp6_tbl" class="nd">
			<p class="IPv6 nd"><b class="item L1 T T_ip6ispaddr">ISP specified IPv6 Address:</b><input type="text" class="text" size="15" value="::" id="externIp6Addr"/></p>
			<p class="IPv6 nd"><b class="item L1 T T_ip6ispgw">ISP specified IPv6 Gateway:</b><input type="text" class="text" size="15" value="::" id="externIp6Gateway"/></p>
		</div>
		<p class="IPv6 nd"><b class="item L1 T T_ip6dnsmanual">Set IPv6 DNS Server manually</b><input type="checkbox" id="dns6_en" onclick="showDiv('dns6_en');"/></p>
		<div id="dns6_tbl" class="nd">
			<p class="IPv6 nd"><b class="item L1 T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dns6_1"/></p>
			<p class="IPv6 nd"><b class="item L1 T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dns6_2"/></p>
		</div>		
	</div>
</div>

<script language="JavaScript" type="text/javascript">initPPPoE();</script>