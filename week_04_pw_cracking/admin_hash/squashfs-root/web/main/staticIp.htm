<script language="javascript" type="text/javascript">function initEditStaticIP(){var wan_iplist=$.wd.conn[$.wd.editIndex].obj;$.loadHelp("staticIp_h.htm");$.id("ip_address").value=wan_iplist.externalIPAddress;$.id("netmask").value=wan_iplist.subnetMask;$.id("ip_gateway").value=wan_iplist.defaultGateway?wan_iplist.defaultGateway:"0.0.0.0";$.id("mtu").value=wan_iplist.maxMTUSize;if(wan_iplist.NATEnabled==1){$.id("enable_nat").checked=1;$.id("enable_fullnat").checked=(wan_iplist.X_TP_FullconeNATEnabled==1)?1:0}else{if(wan_iplist.NATEnabled==0){$.id("enable_nat").checked=0;$.id("enable_fullnat").disabled=1;$.id("enable_fullnat").checked=0}}$.id("enable_spi").checked=(wan_iplist.X_TP_FirewallEnabled==1)?1:0;$.id("ip_igmp_en").checked=(wan_iplist.X_TP_IGMPProxyEnabled==1)?1:0;if(wan_iplist.DNSOverrideAllowed==1){$.id("dns_address").value=(wan_iplist.DNSServers).split(",")[0]?(wan_iplist.DNSServers).split(",")[0]:"0.0.0.0";$.id("second_dns").value=(wan_iplist.DNSServers).split(",")[1]?(wan_iplist.DNSServers).split(",")[1]:"0.0.0.0"}if(INCLUDE_IPV6){$.id("ip_enable_v4").checked=(wan_iplist.X_TP_IPv4Enabled==1)?1:0;enableStaIPv4();$.id("ip_enable_v6").checked=(wan_iplist.X_TP_IPv6Enabled==1)?1:0;enableStaIPv6();$.id("ip6_address").value=wan_iplist.X_TP_ExternalIPv6Address;$.id("ip6_plen").value=wan_iplist.X_TP_PrefixLength;$.id("ip6_gateway").value=wan_iplist.X_TP_DefaultIPv6Gateway?wan_iplist.X_TP_DefaultIPv6Gateway:"::";if(wan_iplist.X_TP_DefaultIPv6GatewayOverride==0){$.id("ip6_gateway").value="::"}if(INCLUDE_IPV6_MLD){$.id("ip_mld_en").checked=(wan_iplist.X_TP_MLDProxyEnabled==1)?1:0}if(wan_iplist.X_TP_IPv6DNSOverrideAllowed==1){$.id("dns6_address").value=(wan_iplist.X_TP_IPv6DNSServers).split(",")[0]?(wan_iplist.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("second_dns6").value=(wan_iplist.X_TP_IPv6DNSServers).split(",")[1]?(wan_iplist.X_TP_IPv6DNSServers).split(",")[1]:"::"}}}function showIPoE(){if(INCLUDE_IPV6){showIPv6();$.id("ip_enable_v4").checked=1;enableStaIPv4();$.id("ip_enable_v6").checked=0;enableStaIPv6()}$.removeClass($.id("ip_elem_basic"),"nd");$.removeClass($.id("ipoeClick"),"nd");$.removeClass($.id("ipoeClick"),"cln");$.addClass($.id("ip_elem_adv"),"nd");$.loadHelp("staticIp_h.htm")}function enableStaIPv4(){if($.id("ip_enable_v4").checked==1){$.removeClass($.id("ip_basic_v4"),"nd");$.removeClass($.id("ip_adv_v4"),"nd")}else{$.addClass($.id("ip_basic_v4"),"nd");$.addClass($.id("ip_adv_v4"),"nd")}}function enableStaIPv6(){if($.id("ip_enable_v6").checked==1){$.removeClass($.id("ip_basic_v6"),"nd");$.removeClass($.id("ip_adv_v6"),"nd")}else{$.addClass($.id("ip_basic_v6"),"nd");$.addClass($.id("ip_adv_v6"),"nd")}if(INCLUDE_IPV6_MLD){$.removeClass($.id("ip_mld"),"nd")}else{$.addClass($.id("ip_mld"),"nd")}}function initStaticIp(){showIPoE();if($.wd.conn[$.wd.editIndex].type=="staticIp"){initEditStaticIP()}dftGtw=$.id("defaut_gateway_staip");if(INCLUDE_IPV6){dftGtw6=$.id("default_gateway_staip6")}initDefaultGwDNS()}function stcNatClick(){if($.id("enable_nat").checked==1){$.id("enable_fullnat").disabled=0}else{if($.id("enable_nat").checked==0){$.id("enable_fullnat").checked=0;$.id("enable_fullnat").disabled=1}}}function IPClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("ip_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("ip_elem_adv"),"nd");$.addClass(obj,"cln")}}function addStaIpAttrs(){var element;var temp_ip=$.id("ip_address").value;var temp_mask=$.id("netmask").value;var temp_gateway=$.id("ip_gateway").value;if(!INCLUDE_IPV6||$.id("ip_enable_v4").checked==1){if($.ifip(temp_ip)){element=$.id("ip_address");if(element){element.focus();element.select()}return false}if($.mask(temp_mask)){element=$.id("netmask");if(element){element.focus();element.select()}return false}if($.ipmask(temp_ip,temp_mask)){element=$.id("ip_address");if(element){element.focus();element.select()}return false}}wanArg.externalIPAddress=$.ip2ip(temp_ip);wanArg.subnetMask=$.ip2ip(temp_mask);if(!INCLUDE_IPV6||$.id("ip_enable_v4").checked==1){if((temp_gateway=="")||(temp_gateway=="0.0.0.0")){$.alert(ERR_STAIP_GW_INVAD);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}if(($.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}if((!isSameLan(temp_gateway,temp_mask,temp_ip,temp_mask))){$.alert(ERR_GATEWAY_INVAD);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}}wanArg.defaultGateway=(temp_gateway)?$.ip2ip(temp_gateway):"0.0.0.0";wanArg.NATEnabled=$.id("enable_nat").checked?1:0;wanArg.X_TP_FullconeNATEnabled=$.id("enable_fullnat").checked?1:0;wanArg.X_TP_FirewallEnabled=$.id("enable_spi").checked?1:0;wanArg.X_TP_IGMPProxyEnabled=$.id("ip_igmp_en").checked?1:0;if(($.id("mtu").value>=576)&&($.id("mtu").value<=1500)){wanArg.maxMTUSize=parseInt($.id("mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("mtu");if(element){element.focus();element.select()}return false}var temp_dnsaddr=$.id("dns_address").value;var temp_secdnsaddr=$.id("second_dns").value;var temp_dnsServers="";if(!INCLUDE_IPV6||$.id("ip_enable_v4").checked==1){if((temp_dnsaddr=="")||(temp_dnsaddr=="0.0.0.0")){$.alert(ERR_STAIP_DNS1_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if(($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("second_dns");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wanArg.DNSOverrideAllowed=((temp_dnsServers=="0.0.0.0,0.0.0.0")?0:1);wanArg.DNSServers=temp_dnsServers;wanArg.enable=1;wanArg.connectionType="IP_Routed";wanArg.addressingType="Static";if($.wd.conn[$.wd.editIndex].type=="staticIp"){$.wd.l3ForwardingObj.__ifAliasName=dftGtw.options[dftGtw.selectedIndex].text}if(INCLUDE_IPV6){wanArg.X_TP_IPv4Enabled=($.id("ip_enable_v4").checked==1)?1:0;wanArg.X_TP_IPv6Enabled=($.id("ip_enable_v6").checked==1)?1:0;if(wanArg.X_TP_IPv4Enabled==0&&wanArg.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}var temp_ip6=$.id("ip6_address").value;var temp_plen=$.id("ip6_plen").value;var temp_gateway=$.id("ip6_gateway").value;if(wanArg.X_TP_IPv6Enabled==1){if(!isValidGLUIP6AddrStrict(temp_ip6)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("ip6_address");if(element){element.focus();element.select()}return false}if(temp_plen!=64){$.alert(ERR_WAN6_PFXLEN_INVAD);element=$.id("ip6_plen");if(element){element.focus();element.select()}return false}if(temp_gateway!=""&&temp_gateway!="::"&&!isValidGLUIP6AddrStrict(temp_gateway)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("ip6_gateway");if(element){element.focus();element.select()}return false}}wanArg.X_TP_ExternalIPv6Address=temp_ip6;wanArg.X_TP_PrefixLength=temp_plen;wanArg.X_TP_DefaultIPv6Gateway=(temp_gateway)?temp_gateway:"::";wanArg.X_TP_DefaultIPv6GatewayOverride=(wanArg.X_TP_DefaultIPv6Gateway!="::")?1:0;if(INCLUDE_IPV6_MLD){wanArg.X_TP_MLDProxyEnabled=$.id("ip_mld_en").checked?1:0}var temp_dnsaddr=$.id("dns6_address").value;var temp_secdnsaddr=$.id("second_dns6").value;var temp_DNSServers="";if(wanArg.X_TP_IPv6Enabled==1){if(temp_dnsaddr!=""&&temp_dnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_dnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_address");if(element){element.focus();element.select()}return false}if(temp_secdnsaddr!=""&&temp_secdnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_secdnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("second_dns6");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?temp_dnsaddr:"::";temp_secdnsaddr=(temp_secdnsaddr)?temp_secdnsaddr:"::";temp_DNSServers=temp_dnsaddr+","+temp_secdnsaddr;wanArg.X_TP_IPv6DNSOverrideAllowed=((temp_DNSServers=="::,::")?0:1);wanArg.X_TP_IPv6DNSServers=temp_DNSServers;if($.wd.conn[$.wd.editIndex].type=="staticIp"){$.wd.l3Ip6ForwardingObj.__ifAliasName=dftGtw6.options[dftGtw6.selectedIndex].text}}return true};</script>

<div id="ip_elem_basic" class="nd">
	<p class="br IPv6 nd"></p>
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" id="ip_enable_v4" onclick="enableStaIPv4();" /></p>
	<div id="ip_basic_v4">
		<p><b class="item L T T_ipaddr">IP Address:</b><input type="text" class="text" id="ip_address" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_netmask">Subnet Mask:</b><input type="text" class="text" id="netmask" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_gateway">Gateway:</b><input type="text" class="text" id="ip_gateway" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" id="dns_address" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_secdns">Secondary DNS server:</b><input type="text" class="text" id="second_dns" value="0.0.0.0" size="15" maxlength="15" /> <span class="T T_optional">(optional)</span></p>
		
		<p class="br"></p>
		<p><b class="item L T T_defgw">Default Gateway:</b><select id="defaut_gateway_staip" class="L"></select></p>
	</div>
	<p class="br IPv6 nd"></p>
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" id="ip_enable_v6" onclick="enableStaIPv6();" /></p>
	<div id="ip_basic_v6">
		<p class="IPv6 nd"><b class="item L T T_ip6addr">IPv6 Address:</b><input type="text" class="text" id="ip6_address" value="::" size="15" maxlength="40" /></p>
		<p class="IPv6 nd"><b class="item L T T_plen">Prefix Length:</b><input type="text" class="text" id="ip6_plen" value="64" size="15" maxlength="15" /></p>
		<p class="IPv6 nd"><b class="item L T T_ip6gw">IPv6 Gateway:</b><input type="text" class="text" id="ip6_gateway" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
		<p class="IPv6 nd"><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" id="dns6_address" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
		<p class="IPv6 nd"><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" id="second_dns6" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
	
		<p class="br IPv6 nd"></p>
		<p class="IPv6 nd"><b class="item L T T_ip6defgw">IPv6 Default Gateway:</b><select id="default_gateway_staip6" class="L"></select></p>
	</div>	

</div>

	<p class="br"></p>
	
<div class="cl" id="ipoeClick" onclick="IPClick(this)"><p class="cl"></p></div>
<div id="ip_elem_adv" class="nd">
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="mtu" size="5" maxlength="4" value="1500"/> (<span class="T T_mtu1500">1500 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="ip_adv_v4">
		<p class="br IPv6 nd"></p>
		<p><b class="item L T T_ennat">Enable NAT</b><input type="checkbox" id="enable_nat" checked="checked" onclick="stcNatClick();"/>&nbsp;</p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="enable_fullnat" />&nbsp;</p>
		<p><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="enable_spi" />&nbsp;</p>
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="ip_igmp_en" checked="true" />&nbsp;</p>
	</div>
	<div id="ip_adv_v6">
		<p class="br IPv6 nd"></p>
		<div id="ip_mld">
			<p class="IPv6 nd"><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="ip_mld_en" checked="true" />&nbsp;</p>
		</div>
	</div>
</div>

<script language="JavaScript" type="text/javascript">initStaticIp();</script>