<script language="javascript" type="text/javascript">function getPPPoEConnStatus(){var pppoelist=$.act(ACT_GET,WAN_PPP_CONN,PPPoEStk,null,null);if(!$.exe()&&(pppoelist.enable==1)){if(pppoelist.connectionStatus=="Connecting"){$.removeClass($.id("PPPoEConnecting"),"nd")}else{$.addClass($.id("PPPoEConnecting"),"nd")}if(INCLUDE_IPV6&&pppoelist.X_TP_IPv4Enabled==0){$.id("conn").disabled=1;$.id("disConn").disabled=1}else{if(pppoelist.connectionStatus=="Connected"){$.id("conn").disabled=1;$.id("disConn").disabled=0}else{if((pppoelist.connectionStatus=="Disconnected")||(pppoelist.connectionStatus=="Unconfigured")){$.id("conn").disabled=0;$.id("disConn").disabled=1}else{$.id("conn").disabled=1;$.id("disConn").disabled=0}}}}}function getDynamicIPConnStatus(){var iplist_dyn=$.act(ACT_GET,WAN_IP_CONN,dynStk,null,null);if(!$.exe()&&(iplist_dyn.enable==1)){$.h($.id("dyn_ip6_addr"),iplist_dyn.X_TP_ExternalIPv6Address);$.h($.id("dyn_prefix_len"),iplist_dyn.X_TP_PrefixLength);$.h($.id("dyn_ip6_gw"),iplist_dyn.X_TP_DefaultIPv6Gateway)}}function formatIPv6(address){address=address.replace(/:(0){1,4}/g,":0");address=address.replace(/(?!((:0:)|(:0$)))(:0)/g,":");if(-1==address.indexOf("::")){address=address.replace(/(:0)+:/,"::")}else{address=address.replace(/(:0)*::/,"::")}return address}function isValidGLUIP6AddrStrict(ip6Addr){var flag;var regExp=/^(:|[a-f]|[A-F]|[0-9]){1,39}$/;if(regExp.test(ip6Addr)){flag=true}else{flag=false}regExp=/::/;if(flag){if(regExp.test(ip6Addr)){regExp=/^([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*$/;if(regExp.test(ip6Addr)){flag=false}else{var index=ip6Addr.indexOf("::");var len=ip6Addr.length;var substr1=ip6Addr.substr(0,index);var substr2=ip6Addr.substr(index+2,len-index-2);regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){0,6}([a-f]|[A-F]|[0-9]){1,4}$/;var num=0;if(""==substr1&&""==substr2){flag=false}else{if(""==substr2){flag=false}else{if(""==substr1){if(!regExp.test(substr2)){flag=false}}else{if(!regExp.test(substr1)||!regExp.test(substr2)){flag=false}else{if(regExp.test(substr1)&&regExp.test(substr2)){for(var i=0;i<substr1.length;i++){if(substr1.charAt(i)==":"){num+=1}}for(var i=0;i<substr2.length;i++){if(substr1.charAt(i)==":"){num+=1}}if(num>5){flag=false}}}}}}}}else{regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){7}([a-f]|[A-F]|[0-9]){1,4}$/;if(!regExp.test(ip6Addr)){flag=false}}}if(flag){var index;index=ip6Addr.indexOf(":");var substr=ip6Addr.substr(0,index);if(0==index||parseInt(substr,16)==0){regExp=/^((0{0,4})|::|:)*$/;if(regExp.test(ip6Addr)){flag=false}regExp=/^(((0){0,4})|::|:)*((0){0,3}(1))$/;if(regExp.test(ip6Addr)){flag=false}}else{if(parseInt(substr,16)>=8192&&parseInt(substr,16)<=16383){flag=true}else{flag=false}}}return flag}function showLnkType(){var linkType=$.id("link_type").value;if($.id("wan_enable_ipv6").checked==false){linkType="disabled"}if(linkType=="staticIp"){$.loadHelpFrame("WanStaticIpV6CfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("static:1")}else{if($.id("ethWan_en").checked==0){$.reload("static:0")}}}return}if(linkType=="dynamicIp"){$.loadHelpFrame("WanDynamicIpV6CfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("dynamic:1")}else{if($.id("ethWan_en").checked==0){$.reload("dynamic:0")}}}return}if(linkType=="pppoe"){$.loadHelpFrame("PPPoEv6CfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("pppoe:1")}else{if($.id("ethWan_en").checked==0){$.reload("pppoe:0")}}}return}if(linkType=="l2tp"){$.loadHelpFrame("L2tpCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("l2tp:1")}else{if($.id("ethWan_en").checked==0){$.reload("l2tp:0")}}}return}if(linkType=="pptp"){$.loadHelpFrame("PptpCfgHelpRpm.htm");if(loadType=="init"){if($.id("ethWan_en").checked==1){$.reload("pptp:1")}else{if($.id("ethWan_en").checked==0){$.reload("pptp:0")}}}return}if(linkType=="6to4"){$.loadHelpFrame("Wan6to4TunnelCfgHelpRpm.htm");if(loadType=="init"){$.reload("6to4:1")}return}if(linkType=="disabled"){if(loadType=="init"){$.reload("disabled:1")}return}}function natClick(val){if(val=="static"){if($.id("enable_nat").checked==1){$.id("enable_fullnat").disabled=0}else{if($.id("enable_nat").checked==0){$.id("enable_fullnat").checked=0;$.id("enable_fullnat").disabled=1}}}else{if(val=="dynamic"){if($.id("dyn_enable_nat").checked==1){$.id("dyn_enable_fullnat").disabled=0}else{if($.id("dyn_enable_nat").checked==0){$.id("dyn_enable_fullnat").checked=0;$.id("dyn_enable_fullnat").disabled=1}}}}}function IPClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("ip_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("ip_elem_adv"),"nd");$.addClass(obj,"cln")}}function DynIPClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("dyn_ip_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("dyn_ip_elem_adv"),"nd");$.addClass(obj,"cln")}}function PPPoEClick(obj){if($.hasClass(obj,"cln")){$.addClass($.id("pppoe_elem_adv"),"nd");$.removeClass(obj,"cln")}else{$.removeClass($.id("pppoe_elem_adv"),"nd");$.addClass(obj,"cln")}}function doManualDns(){if($.id("dynamic_manual_dns").checked==1){$.removeClass($.id("dyn_ip_dns_tbl"),"nd")}else{$.addClass($.id("dyn_ip_dns_tbl"),"nd")}}function doManualDns6(){if($.id("dynamic_manual_dns6").checked==1){$.removeClass($.id("dyn_ip_dns6_tbl"),"nd")}else{$.addClass($.id("dyn_ip_dns6_tbl"),"nd")}}function PPPoEShowDiv(val){switch(val){case 2:if($.id("externIp_en").checked==1){$.removeClass($.id("exIp_tbl"),"nd")}else{$.addClass($.id("exIp_tbl"),"nd")}break;case 3:if($.id("dns_en").checked==1){$.removeClass($.id("dns_tbl"),"nd")}else{$.addClass($.id("dns_tbl"),"nd")}break;default:}}function ShowDiv(val){if(val==null){return}var objId=val.id;var pattern1=/_enable/i;var pattern2=/ppp_/i;if(objId.search(pattern1)!=-1){var obj=$.id(objId.replace(pattern1,"_basic"));if(obj!=null){if(val.checked==true){$.removeClass(obj,"nd")}else{$.addClass(obj,"nd")}}obj=$.id(objId.replace(pattern1,"_adv"));if(obj!=null){if(val.checked==true){$.removeClass(obj,"nd")}else{$.addClass(obj,"nd")}}if(objId.search(pattern2)!=-1){if($.id("ppp_ip4_elem_enable").checked==false&&$.id("ppp_ip6_elem_enable").checked==true){$.id("connAlwaysOn").checked=true;$.id("connOnDemand").disabled=true;$.id("connManual").disabled=true}else{$.id("connOnDemand").disabled=false;$.id("connManual").disabled=false}}}else{if(objId=="externIp6_en"){if(val.checked==true){$.removeClass($.id("exIp6_tbl"),"nd");if(INCLUDE_IPV6_SLAAC){$.id("ppp_ip6addr_type").disabled=1}if(INCLUDE_IP6_WAN_NOT_ASSIGN_ADDR){$.id("ppp_hide_addr_config").disabled=1}}else{$.addClass($.id("exIp6_tbl"),"nd");if(INCLUDE_IPV6_SLAAC){$.id("ppp_ip6addr_type").disabled=0}if(INCLUDE_IP6_WAN_NOT_ASSIGN_ADDR){$.id("ppp_hide_addr_config").disabled=0}}}else{if(objId=="dns6_en"){if(val.checked==true){$.removeClass($.id("dns6_tbl"),"nd")}else{$.addClass($.id("dns6_tbl"),"nd")}}}}}function isSameLan(lan1Ip,lan1Mask,lan2Ip,lan2Mask){var count=0;lan1a=lan1Ip.split(".");lan1m=lan1Mask.split(".");lan2a=lan2Ip.split(".");lan2m=lan2Mask.split(".");for(i=0;i<4;i++){l1a_n=parseInt(lan1a[i]);l1m_n=parseInt(lan1m[i]);l2a_n=parseInt(lan2a[i]);l2m_n=parseInt(lan2m[i]);if((l1a_n&l1m_n)==(l2a_n&l2m_n)){count++}}if(count==4){var testIp=$.ip2num(lan1Ip);var lanMask=$.ip2num(lan1Mask);if(((testIp&(~lanMask))==0)||((testIp&(~lanMask))==(~lanMask))){return false}else{return true}}else{return false}}function charCompareA(szname,en_limit,cn_limit){var c;var ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.";if(szname.length>en_limit){return false}for(var i=0;i<szname.length;i++){c=szname.charAt(i);if(ch.indexOf(c)==-1){if(szname.length>cn_limit){return false}}}return true}function initStaticIP(){$.removeClass($.id("ip_elem_basic"),"nd");$.removeClass($.id("ipoeClick"),"nd");$.removeClass($.id("ipoeClick"),"cln");$.addClass($.id("ip_elem_adv"),"nd");$.loadHelpFrame("WanStaticIpV6CfgHelpRpm.htm");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.addClass($.id("wan_select"),"nd");$.id("ip_address").value=wan_iplist_sta.externalIPAddress;$.id("netmask").value=wan_iplist_sta.subnetMask;$.id("ip_gateway").value=wan_iplist_sta.defaultGateway?wan_iplist_sta.defaultGateway:"0.0.0.0";$.id("mtu").value=wan_iplist_sta.maxMTUSize;if(wan_iplist_sta.NATEnabled==1){$.id("enable_nat").checked=1;$.id("enable_fullnat").checked=(wan_iplist_sta.X_TP_FullconeNATEnabled==1)?1:0}else{if(wan_iplist_sta.NATEnabled==0){$.id("enable_nat").checked=0;$.id("enable_fullnat").disabled=1;$.id("enable_fullnat").checked=0}}$.id("enable_spi").checked=(wan_iplist_sta.X_TP_FirewallEnabled==1)?1:0;$.id("ip_igmp_en").checked=(wan_iplist_sta.X_TP_IGMPProxyEnabled==1)?1:0;if(wan_iplist_sta.DNSOverrideAllowed==1){$.id("dns_address").value=(wan_iplist_sta.DNSServers).split(",")[0]?(wan_iplist_sta.DNSServers).split(",")[0]:"0.0.0.0";$.id("second_dns").value=(wan_iplist_sta.DNSServers).split(",")[1]?(wan_iplist_sta.DNSServers).split(",")[1]:"0.0.0.0"}if(INCLUDE_IPV6){$.id("stc_ip4_elem_enable").checked=(wan_iplist_sta.X_TP_IPv4Enabled==1)?1:0;ShowDiv($.id("stc_ip4_elem_enable"));$.id("stc_ip6_elem_enable").checked=(wan_iplist_sta.X_TP_IPv6Enabled==1)?1:0;ShowDiv($.id("stc_ip6_elem_enable"));if(INCLUDE_IPV6_MLD){$.removeClass($.id("ip_mld"),"nd");$.id("ip_mld_en").checked=(wan_iplist_sta.X_TP_MLDProxyEnabled==1)?1:0}else{$.addClass($.id("ip_mld"),"nd")}$.id("stc_ip6_addr").value=wan_iplist_sta.X_TP_ExternalIPv6Address;$.id("stc_prefix_len").value=wan_iplist_sta.X_TP_PrefixLength;$.id("stc_ip6_gateway").value=wan_iplist_sta.X_TP_DefaultIPv6Gateway;$.id("dns6_address").value=(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[0]?(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("second_dns6").value=(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[1]?(wan_iplist_sta.X_TP_IPv6DNSServers).split(",")[1]:"::"}}function initDynamicIP(){$.removeClass($.id("dyn_ip_elem_basic"),"nd");$.removeClass($.id("dynipClick"),"nd");$.removeClass($.id("dynipClick"),"cln");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.loadHelpFrame("WanDynamicIpV6CfgHelpRpm.htm");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.addClass($.id("wan_select"),"nd");$.auto(function(){getDynamicIPConnStatus()},5000,true);$.id("dyn_mtu").value=wan_iplist_dyn.maxMTUSize;if(wan_iplist_dyn.NATEnabled==1){$.id("dyn_enable_nat").checked=1;$.id("dyn_enable_fullnat").checked=(wan_iplist_dyn.X_TP_FullconeNATEnabled==1)?1:0}else{if(wan_iplist_dyn.NATEnabled==0){$.id("dyn_enable_nat").checked=0;$.id("dyn_enable_fullnat").disabled=1;$.id("dyn_enable_fullnat").checked=0}}if(wan_iplist_dyn.DNSOverrideAllowed==1){$.id("dyn_dns1").value=(wan_iplist_dyn.DNSServers).split(",")[0]?(wan_iplist_dyn.DNSServers).split(",")[0]:"0.0.0.0";$.id("dyn_dns2").value=(wan_iplist_dyn.DNSServers).split(",")[1]?(wan_iplist_dyn.DNSServers).split(",")[1]:"0.0.0.0"}$.id("dynamic_manual_dns").checked=wan_iplist_dyn.DNSOverrideAllowed==1?1:0;$.id("hostname").value=wan_iplist_dyn.X_TP_Hostname;$.id("unicast").checked=wan_iplist_dyn.X_TP_Unicast==1?1:0;$.id("dyn_ip_igmp_en").checked=(wan_iplist_dyn.X_TP_IGMPProxyEnabled==1)?1:0;$.id("dyn_ip_spi_en").checked=(wan_iplist_dyn.X_TP_FirewallEnabled==1)?1:0;doManualDns();if(wan_iplist_dyn.enable==1){if(wan_iplist_dyn.connectionStatus=="Connected"){$.removeLoading();$.id("renew").disabled=1;$.id("release").disabled=0}else{if(wan_iplist_dyn.connectionStatus=="Disconnected"){$.removeLoading();$.id("renew").disabled=0;$.id("release").disabled=1}else{$.removeClass($.id("DynIpConnecting"),"nd");$.id("renew").disabled=1;$.id("release").disabled=1}}}if(INCLUDE_IPV6){$.id("dyn_ip4_elem_enable").checked=(wan_iplist_dyn.X_TP_IPv4Enabled==1);ShowDiv($.id("dyn_ip4_elem_enable"));$.id("dyn_ip6_elem_enable").checked=(wan_iplist_dyn.X_TP_IPv6Enabled==1)?1:0;ShowDiv($.id("dyn_ip6_elem_enable"));if(INCLUDE_IPV6_MLD){$.removeClass($.id("dyn_ip_mld"),"nd");$.id("dyn_ip_mld_en").checked=(wan_iplist_dyn.X_TP_MLDProxyEnabled==1)?1:0}else{$.addClass($.id("dyn_ip_mld"),"nd")}$.h($.id("dyn_ip6_addr"),wan_iplist_dyn.X_TP_ExternalIPv6Address);$.h($.id("dyn_prefix_len"),wan_iplist_dyn.X_TP_PrefixLength);$.h($.id("dyn_ip6_gw"),wan_iplist_dyn.X_TP_DefaultIPv6Gateway);$.id("dynamic_manual_dns6").checked=(wan_iplist_dyn.X_TP_IPv6DNSOverrideAllowed==1)?1:0;doManualDns6();if(wan_iplist_dyn.X_TP_IPv6DNSOverrideAllowed==1){$.id("dyn_dns6_1").value=(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[0]?(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("dyn_dns6_2").value=(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[1]?(wan_iplist_dyn.X_TP_IPv6DNSServers).split(",")[1]:"::"}if(INCLUDE_IPV6_SLAAC){$.id("dyn_ip6addr_type").selectedIndex=(wan_iplist_dyn.X_TP_IPv6AddressingType=="DHCPv6")?0:1}if(INCLUDE_IP6_WAN_NOT_ASSIGN_ADDR){$.removeClass($.id("dyn_hide_addr_check"),"nd");$.id("dyn_hide_addr_config").checked=(wan_iplist_dyn.X_TP_IPv6AddressingType=="None")?1:0;hideAutoAddrConfig("dyn")}else{$.addClass($.id("dyn_hide_addr_check"),"nd")}}}function initPPPoE(){$.removeClass($.id("pppoe_elem_basic"),"nd");$.removeClass($.id("pppoeClick"),"nd");$.removeClass($.id("pppoeClick"),"cln");$.addClass($.id("pppoe_elem_adv"),"nd");$.loadHelpFrame("PPPoEv6CfgHelpRpm.htm");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("wan_select"),"nd");$.id("username").value=wan_pppoelist.username;$.id("pwd").value=wan_pppoelist.password;$.id("pwd2").value=wan_pppoelist.password;if(INCLUDE_SPECIAL_DIAL_MODE){$.id("speDail").value=wan_pppoelist.X_TP_SpecialDail}$.id("idleTime").value=wan_pppoelist.idleDisconnectTime;if(wan_pppoelist.connectionTrigger=="OnDemand"){$.id("connOnDemand").checked=1}else{if(wan_pppoelist.connectionTrigger=="AlwaysOn"){$.id("connAlwaysOn").checked=1}else{if(wan_pppoelist.connectionTrigger=="Manual"){$.id("connManual").checked=1}}}if(wan_pppoelist.PPPAuthenticationProtocol=="AUTO_AUTH"){$.id("ppp_authpro").value="AUTO_AUTH"}else{if(wan_pppoelist.PPPAuthenticationProtocol=="PAP"){$.id("ppp_authpro").value="PAP"}else{if(wan_pppoelist.PPPAuthenticationProtocol=="CHAP"){$.id("ppp_authpro").value="CHAP"}else{if(wan_pppoelist.PPPAuthenticationProtocol=="MS-CHAP"){$.id("ppp_authpro").value="MS-CHAP"}}}}$.id("acName").value=wan_pppoelist.PPPoEACName;$.id("serviceName").value=wan_pppoelist.PPPoEServiceName;$.id("pppmtu").value=wan_pppoelist.maxMRUSize;$.id("ppp_fullnat_en").checked=(wan_pppoelist.X_TP_FullconeNATEnabled==1)?1:0;$.id("ppp_spi_en").checked=(wan_pppoelist.X_TP_FirewallEnabled==1)?1:0;$.id("ppp_igmp_en").checked=(wan_pppoelist.X_TP_IGMPProxyEnabled==1)?1:0;if(wan_pppoelist.X_TP_UseStaticIP==1){$.id("externIp_en").checked=1;$.removeClass($.id("exIp_tbl"),"nd");$.id("externIpAddr").value=wan_pppoelist.externalIPAddress}else{$.id("externIp_en").checked=0;$.addClass($.id("exIp_tbl"),"nd")}$.id("ppp_echotime").value=wan_pppoelist.PPPLCPEcho?wan_pppoelist.PPPLCPEcho:0;if(wan_pppoelist.DNSOverrideAllowed==1){$.id("dns_en").checked=1;$.removeClass($.id("dns_tbl"),"nd");$.id("dns1").value=(wan_pppoelist.DNSServers.split(",")[0])?wan_pppoelist.DNSServers.split(",")[0]:"0.0.0.0";$.id("dns2").value=(wan_pppoelist.DNSServers.split(",")[1])?wan_pppoelist.DNSServers.split(",")[1]:"0.0.0.0"}else{$.id("dns_en").checked=0;$.addClass($.id("dns_tbl"),"nd")}if(wan_pppoelist.enable==1){$.auto(function(){if(!$.locked()){getPPPoEConnStatus()}},5000,true)}if(INCLUDE_IPV6){$.id("ppp_ip4_elem_enable").checked=(wan_pppoelist.X_TP_IPv4Enabled==1)?1:0;ShowDiv($.id("ppp_ip4_elem_enable"));$.id("ppp_ip6_elem_enable").checked=(wan_pppoelist.X_TP_IPv6Enabled==1)?1:0;ShowDiv($.id("ppp_ip6_elem_enable"));$.id("externIp6_en").checked=(wan_pppoelist.X_TP_IPv6AddressingType=="Static")?1:0;ShowDiv($.id("externIp6_en"));if($.id("ppp_ip4_elem_enable").checked==0&&$.id("ppp_ip6_elem_enable").checked==1){$.id("connAlwaysOn").checked=true;$.id("connOnDemand").disabled=true;$.id("connManual").disabled=true}if(INCLUDE_IPV6_MLD){$.removeClass($.id("ppp_mld"),"nd");$.id("ppp_mld_en").checked=(wan_pppoelist.X_TP_MLDProxyEnabled==1)?1:0}else{$.addClass($.id("ppp_mld"),"nd")}if(INCLUDE_IPV6_SLAAC){if(wan_pppoelist.X_TP_IPv6AddressingType=="Static"){$.id("ppp_ip6addr_type").disabled=1}else{$.id("ppp_ip6addr_type").disabled=0;if(wan_pppoelist.X_TP_IPv6AddressingType=="SLAAC"){$.id("ppp_ip6addr_type").selectedIndex=1}}}if(INCLUDE_IP6_WAN_NOT_ASSIGN_ADDR){$.removeClass($.id("ppp_hide_addr_check"),"nd");$.id("ppp_hide_addr_config").checked=(wan_pppoelist.X_TP_IPv6AddressingType=="None")?1:0;$.id("ppp_hide_addr_config").disabled=(wan_pppoelist.X_TP_IPv6AddressingType=="Static")?1:0;hideAutoAddrConfig("ppp")}else{$.addClass($.id("ppp_hide_addr_check"),"nd")}$.id("externIp6Addr").value=wan_pppoelist.X_TP_ExternalIPv6Address?wan_pppoelist.X_TP_ExternalIPv6Address:"::";$.id("externIp6Gateway").value=wan_pppoelist.X_TP_DefaultIPv6Gateway?wan_pppoelist.X_TP_DefaultIPv6Gateway:"::";$.id("dns6_en").checked=(wan_pppoelist.X_TP_IPv6DNSOverrideAllowed==1)?1:0;ShowDiv($.id("dns6_en"));if(wan_pppoelist.X_TP_IPv6DNSOverrideAllowed==1){$.id("dns6_1").value=(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[0]?(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[0]:"::";$.id("dns6_2").value=(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[1]?(wan_pppoelist.X_TP_IPv6DNSServers).split(",")[1]:"::"}}showPPPSameSession();if(PPPoEv4Enable==0){$.id("ppp_same_session").disabled=true;$.addClass($.id("t_ppp_same_sess"),"gray")}else{$.id("ppp_same_session").disabled=false;$.removeClass($.id("t_ppp_same_sess"),"gray")}$.addClass($.id("ppp_ip4_elem_basic"),"nd");$.addClass($.id("ppp_ip4_elem_adv"),"nd");$.removeClass($.id("ppp_ip6_elem_basic"),"nd");$.removeClass($.id("ppp_ip6_elem_adv"),"nd")}function initL2TP(){$.loadHelpFrame("L2tpCfgHelpRpm.htm");$.removeClass($.id("l2tp_pptp_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.removeClass($.id("defgw_elem"),"nd");$.removeClass($.id("l2tp_mtu_msg"),"nd");$.addClass($.id("pptp_mtu_msg"),"nd");$.id("ppp_username").value=wan_l2tp_list.username;$.id("ppp_pwd").value=wan_l2tp_list.password;$.id("srvAddrName").value=wan_l2tp_list.serverIpOrName;if(wan_l2tp_list.connectionStatus=="Connected"){$.id("conn2").disabled=1;$.id("disConn2").disabled=0}else{if((wan_l2tp_list.connectionStatusIP=="Disconnected")||(wan_l2tp_list.connectionStatusIP=="Unconfigured")||((wan_l2tp_list.addressingType=="Static")&&(wan_l2tp_list.connectionStatusIP=="Connected")&&((wan_l2tp_list.connectionStatus=="Unconfigured")||(wan_l2tp_list.connectionStatus=="Disconnected")))){$.id("conn2").disabled=0;$.id("disConn2").disabled=1}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=0}}if(wan_l2tp_list.addressingType=="DHCP"){$.id("ipType_dyn").checked=1;$.removeClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.h($.id("isp_ip_dyn"),wan_l2tp_list.externalIPAddressIP?wan_l2tp_list.externalIPAddressIP:"0.0.0.0");$.h($.id("isp_net_mask_dyn"),wan_l2tp_list.subnetMaskIP?wan_l2tp_list.subnetMaskIP:"0.0.0.0");$.h($.id("isp_gw_dyn"),wan_l2tp_list.defaultGatewayIP?wan_l2tp_list.defaultGatewayIP:"0.0.0.0");$.h($.id("isp_dns_1_dyn"),wan_l2tp_list.DNSServersIP.split(",")[0]?wan_l2tp_list.DNSServersIP.split(",")[0]:"0.0.0.0");$.h($.id("isp_dns_2_dyn"),wan_l2tp_list.DNSServersIP.split(",")[1]?wan_l2tp_list.DNSServersIP.split(",")[1]:"0.0.0.0")}else{if(wan_l2tp_list.addressingType=="Static"){$.id("ipType_stc").checked=1;$.removeClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.id("isp_ip_stc").value=wan_l2tp_list.externalIPAddressIP;$.id("isp_net_mask_stc").value=wan_l2tp_list.subnetMaskIP;$.id("isp_gw_stc").value=wan_l2tp_list.defaultGatewayIP?wan_l2tp_list.defaultGatewayIP:"0.0.0.0";$.id("isp_dns_1_stc").value=wan_l2tp_list.DNSServersIP.split(",")[0]?wan_l2tp_list.DNSServersIP.split(",")[0]:"0.0.0.0";$.id("isp_dns_2_stc").value=wan_l2tp_list.DNSServersIP.split(",")[1]?wan_l2tp_list.DNSServersIP.split(",")[1]:"0.0.0.0"}}$.h($.id("internet_ip"),wan_l2tp_list.externalIPAddress);$.h($.id("internet_dns_1"),wan_l2tp_list.DNSServers.split(",")[0]?wan_l2tp_list.DNSServers.split(",")[0]:"0.0.0.0");$.h($.id("internet_dns_2"),wan_l2tp_list.DNSServers.split(",")[1]?wan_l2tp_list.DNSServers.split(",")[1]:"0.0.0.0");$.id("l2tp_mtu").value=wan_l2tp_list.maxMRUSize;if(wan_l2tp_list.connectionTrigger=="OnDemand"){$.id("da_connOnDemand").checked=1}else{if(wan_l2tp_list.connectionTrigger=="AlwaysOn"){$.id("da_connAlwaysOn").checked=1}else{if(wan_l2tp_list.connectionTrigger=="Manual"){$.id("da_connManual").checked=1}}}$.id("da_idleTime").value=wan_l2tp_list.idleDisconnectTime}function initPPTP(){$.loadHelpFrame("PptpCfgHelpRpm.htm");$.removeClass($.id("l2tp_pptp_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.removeClass($.id("defgw_elem"),"nd");$.removeClass($.id("pptp_mtu_msg"),"nd");$.addClass($.id("l2tp_mtu_msg"),"nd");$.id("ppp_username").value=wan_pptp_list.username;$.id("ppp_pwd").value=wan_pptp_list.password;$.id("srvAddrName").value=wan_pptp_list.serverIpOrName;if(wan_pptp_list.connectionStatus=="Connected"){$.id("conn2").disabled=1;$.id("disConn2").disabled=0}else{if((wan_pptp_list.connectionStatusIP=="Disconnected")||(wan_pptp_list.connectionStatusIP=="Unconfigured")||((wan_pptp_list.addressingType=="Static")&&(wan_pptp_list.connectionStatusIP=="Connected")&&((wan_pptp_list.connectionStatus=="Unconfigured")||(wan_pptp_list.connectionStatus=="Disconnected")))){$.id("conn2").disabled=0;$.id("disConn2").disabled=1}else{$.id("conn2").disabled=1;$.id("disConn2").disabled=0}}if(wan_pptp_list.addressingType=="DHCP"){$.id("ipType_dyn").checked=1;$.removeClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.h($.id("isp_ip_dyn"),wan_pptp_list.externalIPAddressIP?wan_pptp_list.externalIPAddressIP:"0.0.0.0");$.h($.id("isp_net_mask_dyn"),wan_pptp_list.subnetMaskIP?wan_pptp_list.subnetMaskIP:"0.0.0.0");$.h($.id("isp_gw_dyn"),wan_pptp_list.defaultGatewayIP?wan_pptp_list.defaultGatewayIP:"0.0.0.0");$.h($.id("isp_dns_1_dyn"),wan_pptp_list.DNSServersIP.split(",")[0]?wan_pptp_list.DNSServersIP.split(",")[0]:"0.0.0.0");$.h($.id("isp_dns_2_dyn"),wan_pptp_list.DNSServersIP.split(",")[1]?wan_pptp_list.DNSServersIP.split(",")[1]:"0.0.0.0")}else{if(wan_pptp_list.addressingType=="Static"){$.id("ipType_stc").checked=1;$.removeClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.id("isp_ip_stc").value=wan_pptp_list.externalIPAddressIP;$.id("isp_net_mask_stc").value=wan_pptp_list.subnetMaskIP;$.id("isp_gw_stc").value=wan_pptp_list.defaultGatewayIP?wan_pptp_list.defaultGatewayIP:"0.0.0.0";$.id("isp_dns_1_stc").value=wan_pptp_list.DNSServersIP.split(",")[0]?wan_pptp_list.DNSServersIP.split(",")[0]:"0.0.0.0";$.id("isp_dns_2_stc").value=wan_pptp_list.DNSServersIP.split(",")[1]?wan_pptp_list.DNSServersIP.split(",")[1]:"0.0.0.0"}}$.h($.id("internet_ip"),wan_pptp_list.externalIPAddress);$.h($.id("internet_dns_1"),wan_pptp_list.DNSServers.split(",")[0]?wan_pptp_list.DNSServers.split(",")[0]:"0.0.0.0");$.h($.id("internet_dns_2"),wan_pptp_list.DNSServers.split(",")[1]?wan_pptp_list.DNSServers.split(",")[1]:"0.0.0.0");$.id("l2tp_mtu").value=wan_pptp_list.maxMRUSize;if(wan_pptp_list.connectionTrigger=="OnDemand"){$.id("da_connOnDemand").checked=1}else{if(wan_pptp_list.connectionTrigger=="AlwaysOn"){$.id("da_connAlwaysOn").checked=1}else{if(wan_pptp_list.connectionTrigger=="Manual"){$.id("da_connManual").checked=1}}}$.id("da_idleTime").value=wan_pptp_list.idleDisconnectTime}function initWan6to4(){var found=0;var sel=$.id("waninf");var wanConn;$.loadHelpFrame("Wan6to4TunnelCfgHelpRpm.htm");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.removeClass($.id("wan_select"),"nd");for(var i=0;i<wanIPv4List.length;i++){if(wanIPv4List[i].enable==1&&wanIPv4List[i].X_TP_IPv4Enabled==1&&wanIPv4List[i].connectionType!="IP_Bridged"){wanConn=wanIPv4List[i];found=1}}for(var j=0;j<wanPPPv4List.length;j++){if(wanPPPv4List[j].enable==1&&wanPPPv4List[j].X_TP_IPv4Enabled==1){wanConn=wanPPPv4List[j];found=1}}if(INCLUDE_L2TP){for(var j=0;j<wanL2tpConList.length;j++){if(wanL2tpConList[j].enable==1){wanConn=wanL2tpConList[j];found=1}}}if(INCLUDE_PPTP){for(var j=0;j<wanPptpConList.length;j++){if(wanPptpConList[j].enable==1){wanConn=wanPptpConList[j];found=1}}}if(found==1&&wanConn.connectionStatus=="Connected"){var option=$.c("option");option.value=wanConn.__stack;option.text=wanConn.name;try{sel.add(option,null)}catch(e){sel.add(option)}$.h($.id("curwaninf"),wanConn.name);wan4ConnName=wanConn.name}else{var option=$.c("option");option.value=0;option.text=s_str.noAvailIntf;try{sel.add(option,null)}catch(e){sel.add(option)}$.h($.id("curwaninf"),s_str.noAvailIntf);wan4ConnName=""}}function initPDEnable(){var lan6Cfg=$.act(ACT_GL,LAN_IP6_HOST_CFG,null,null,["__ifName","IPv6SitePrefixConfigType"]);if(!$.exe()){for(var index=0;index<lan6Cfg.length;index++){if(lan6Cfg[index].__ifName=="br0"){if(lan6Cfg[index].IPv6SitePrefixConfigType=="Delegated"){PDEnable=1;lan6HostStk=lan6Cfg[index].__stack}else{PDEnable=0;lan6HostStk=lan6Cfg[index].__stack}}}}}function init(){initPDEnable();if(INCLUDE_WAN_MODE){$.addClass($.id("ethEnable"),"nd")}if(INCLUDE_IPV6){var allElements=document.getElementsByTagName("p");var index;for(index=0;index<allElements.length;index++){if(allElements[index]!=null&&$.hasClass(allElements[index],"IPv6")){$.removeClass(allElements[index],"nd")}}if(INCLUDE_IPV6_SLAAC){$.removeClass($.id("ipv6_cfg_dynamic_slaac"),"nd");$.removeClass($.id("ipv6_cfg_ppp_slaac"),"nd")}else{$.addClass($.id("ipv6_cfg_dynamic_slaac"),"nd");$.addClass($.id("ipv6_cfg_ppp_slaac"),"nd")}}else{$.id("dyn_ip4_elem_enable").checked=1;$.id("stc_ip4_elem_enable").checked=1;$.id("ppp_ip4_elem_enable").checked=1;$.id("dyn_ip6_elem_enable").checked=0;$.id("stc_ip6_elem_enable").checked=0;$.id("ppp_ip6_elem_enable").checked=0;ShowDiv($.id("dyn_ip4_elem_enable"));ShowDiv($.id("stc_ip4_elem_enable"));ShowDiv($.id("ppp_ip4_elem_enable"));ShowDiv($.id("dyn_ip6_elem_enable"));ShowDiv($.id("stc_ip6_elem_enable"));ShowDiv($.id("ppp_ip6_elem_enable"))}loadType=($.mainParam)?$.mainParam.split(":")[0]:"init";var type="";if(INCLUDE_IPV6){var wanIPv6ListAll=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","addressingType","X_TP_IPv6Enabled"]);var wanPPPv6ListAll=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","transportType","X_TP_IPv6Enabled","X_TP_IPv4Enabled"]);var wanIPList={};var wanPPPList={};var wanIndex=0;if(!$.exe()){$.each(wanIPv6ListAll,function(){if(this.X_TP_IPv6Enabled==1){wanIPList[wanIndex]=this;wanIndex++}});wanIndex=0;wanv4Index=0;$.each(wanPPPv6ListAll,function(){wanPPPList[wanIndex]=this;wanIndex++})}}else{var wanIPList=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","addressingType"]);var wanPPPList=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","transportType"])}var wanTypes=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]);wan6MainTunnel=$.act(ACT_GET,IP6_TUNNEL,null,null);var IPv6Cfg=$.act(ACT_GET,IPV6_CFG,null,null);if(!$.exe()){$.each(wanTypes,function(){if(this.WANAccessType=="Ethernet"){pStk=this.__stack}});var ethWan=$.act(ACT_GET,WAN_ETH_INTF,pStk,null,["enable","X_TP_lastUsedIntf"]);$.each(wanIPList,function(){var tmpStk=$.stkPop(this.__stack,2);if(pStk==tmpStk){if(this.addressingType=="Static"){staticStk=this.__stack;staticEnable=this.enable;wan_iplist_sta=$.act(ACT_GET,WAN_IP_CONN,this.__stack,null,null)}if(this.addressingType=="DHCP"){dynStk=this.__stack;dynEnable=this.enable;wan_iplist_dyn=$.act(ACT_GET,WAN_IP_CONN,this.__stack,null,null)}if((this.enable==1)&&(this.addressingType=="Static")){type="staticIp"}else{if((this.enable==1)&&(this.addressingType=="DHCP")){type="dynamicIp"}}}});$.each(wanPPPList,function(){var tmpStk=$.stkPop(this.__stack,2);if(pStk==tmpStk){if(this.transportType=="PPPoE"&&this.X_TP_IPv4Enabled==0){PPPoEv6Stk=this.__stack;PPPoEv6Enable=this.enable;wan_pppoev6list=$.act(ACT_GET,WAN_PPP_CONN,this.__stack,null,null)}if(this.transportType=="PPPoE"&&this.X_TP_IPv4Enabled==1){PPPoEv4Stk=this.__stack;PPPoEv4Enable=this.enable;PPPoEv4v6Enable=this.X_TP_IPv6Enabled;wan_pppoev4list=$.act(ACT_GET,WAN_PPP_CONN,this.__stack,null,null)}if((this.enable==1)&&(this.transportType=="PPPoE")&&(this.X_TP_IPv6Enabled==1)){type="pppoe"}}});if($.mainParam&&$.mainParam.split(":")[2]){if($.mainParam.split(":")[2]==1){PPPoEStk=PPPoEv4Stk;PPPoEEnable=PPPoEv4Enable;wan_pppoelist=wan_pppoev4list;$.id("ppp_same_session").checked=true}else{PPPoEStk=PPPoEv6Stk;PPPoEEnable=PPPoEv6Enable;wan_pppoelist=wan_pppoev6list;$.id("ppp_same_session").checked=false}}else{if(PPPoEv4Enable==1&&PPPoEv4v6Enable==1){PPPoEStk=PPPoEv4Stk;PPPoEEnable=PPPoEv4Enable;wan_pppoelist=wan_pppoev4list;$.id("ppp_same_session").checked=true}else{PPPoEStk=PPPoEv6Stk;PPPoEEnable=PPPoEv6Enable;wan_pppoelist=wan_pppoev6list;$.id("ppp_same_session").checked=false}}if(wan6MainTunnel){if(wan6MainTunnel.enabled==1){type="6to4"}wan6to4Enable=wan6MainTunnel.enabled;wan6to4Stk=wan6MainTunnel.__stack;wanIPv4List=$.act(ACT_GL,WAN_IP_CONN,null,null);wanPPPv4List=$.act(ACT_GL,WAN_PPP_CONN,null,null);if(INCLUDE_L2TP){wanL2tpConList=$.act(ACT_GL,WAN_L2TP_CONN,null,null)}if(INCLUDE_PPTP){wanPptpConList=$.act(ACT_GL,WAN_PPTP_CONN,null,null)}}if(IPv6Cfg.disableIPv6==1&&loadType=="init"){type="disabled"}IPv6CfgStk=IPv6Cfg.__stack;if(!$.exe()){if($.mainParam){$.id("ethWan_en").checked=($.mainParam.split(":")[1]==1)?1:0}else{$.id("ethWan_en").checked=(ethWan.enable==1)?1:0}if(loadType=="static"){$.id("link_type").value="staticIp";initStaticIP()}else{if(loadType=="dynamic"){$.id("link_type").value="dynamicIp";initDynamicIP();doManualDns()}else{if(loadType=="pppoe"){$.id("link_type").value="pppoe";initPPPoE()}else{if(loadType=="l2tp"){$.id("link_type").value="l2tp";initL2TP()}else{if(loadType=="pptp"){$.id("link_type").value="pptp";initPPTP()}else{if(loadType=="6to4"){$.id("link_type").value="6to4";initWan6to4()}else{if(loadType=="disabled"){$.id("wan_enable_ipv6").checked=false;$.addClass($.id("wan_conn_type"),"nd");initDisabledIPv6()}else{if(loadType=="init"){if(type==""){$.id("wan_enable_ipv6").checked=false;$.addClass($.id("wan_conn_type"),"nd");initDisabledIPv6()}if(type=="staticIp"){$.id("link_type").value="staticIp";initStaticIP()}else{if(type=="dynamicIp"){$.id("link_type").value="dynamicIp";initDynamicIP();doManualDns()}else{if(type=="pppoe"){$.id("link_type").value="pppoe";initPPPoE()}else{if(type=="l2tp"){$.id("link_type").value="l2tp";initL2TP()}else{if(type=="pptp"){$.id("link_type").value="pptp";initPPTP()}else{if(type=="6to4"){$.id("link_type").value="6to4";initWan6to4()}else{if(type=="disabled"){$.id("wan_enable_ipv6").checked=false;$.addClass($.id("wan_conn_type"),"nd");initDisabledIPv6()}}}}}}}}}}}}}}}loadType="init"}}}function isLinkLocalAddr(addr){var addrArray=addr.split(":");var str=addrArray[0];if(false==/[0-9a-fA-F]{4,4}/.test(str)){return false}var delta=("0x"+str)-65152;if(delta<0||delta>63){return false}addr="2001";for(var i=1;i<addrArray.length;i++){addr+=":"+addrArray[i]}return isValidGLUIP6AddrStrict(addr)}function addStaticIpAttrs(){var temp_ip=$.id("ip_address").value;var temp_mask=$.id("netmask").value;var temp_gateway=$.id("ip_gateway").value;wan_iplistarg_sta.X_TP_PDEnabled=PDEnable;if(!INCLUDE_IPV6||$.id("stc_ip4_elem_enable").checked==1){if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_iplistarg_sta.externalIPAddress=$.ip2ip(temp_ip);wan_iplistarg_sta.subnetMask=$.ip2ip(temp_mask)}else{return false}if((temp_gateway!="")&&(temp_gateway!="0.0.0.0")&&($.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}if((temp_gateway!="")&&(temp_gateway!="0.0.0.0")&&(!isSameLan(temp_gateway,temp_mask,temp_ip,temp_mask))){$.alert(ERR_GATEWAY_INVAD);element=$.id("ip_gateway");if(element){element.focus();element.select()}return false}}wan_iplistarg_sta.defaultGateway=(temp_gateway)?$.ip2ip(temp_gateway):"0.0.0.0";wan_iplistarg_sta.NATEnabled=$.id("enable_nat").checked?1:0;wan_iplistarg_sta.X_TP_FullconeNATEnabled=$.id("enable_fullnat").checked?1:0;wan_iplistarg_sta.X_TP_FirewallEnabled=$.id("enable_spi").checked?1:0;wan_iplistarg_sta.X_TP_IGMPProxyEnabled=$.id("ip_igmp_en").checked?1:0;if(($.id("mtu").value>=576)&&($.id("mtu").value<=1500)){wan_iplistarg_sta.maxMTUSize=parseInt($.id("mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("mtu");if(element){element.focus();element.select()}return false}var temp_dnsaddr=$.id("dns_address").value;var temp_secdnsaddr=$.id("second_dns").value;var temp_dnsServers="";if(!INCLUDE_IPV6||$.id("stc_ip4_elem_enable").checked==1){if((temp_dnsaddr!="")&&(temp_dnsaddr!="0.0.0.0")&&($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("second_dns");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_iplistarg_sta.DNSOverrideAllowed=((temp_dnsServers=="0.0.0.0,0.0.0.0")?0:1);wan_iplistarg_sta.DNSServers=temp_dnsServers;if(INCLUDE_IPV6){wan_iplistarg_sta.X_TP_IPv4Enabled=($.id("stc_ip4_elem_enable").checked==1)?1:0;wan_iplistarg_sta.X_TP_IPv6Enabled=($.id("stc_ip6_elem_enable").checked==1)?1:0;if(wan_iplistarg_sta.X_TP_IPv4Enabled==0&&wan_iplistarg_sta.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}wan_iplistarg_sta.X_TP_IPv6AddressingType="Static";var temp_ip6=$.id("stc_ip6_addr").value;var temp_plen=$.id("stc_prefix_len").value;var temp_gateway=$.id("stc_ip6_gateway").value;if($.id("stc_ip6_elem_enable").checked==1){if(!isValidGLUIP6AddrStrict(temp_ip6)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("stc_ip6_addr");if(element){element.focus();element.select()}return false}else{temp_ip6=formatIPv6(temp_ip6)}if(temp_plen<0||temp_plen>128){$.alert(ERR_WAN6_PFXLEN_INVAD);element=$.id("stc_prefix_len");if(element){element.focus();element.select()}return false}if(temp_gateway!=""&&temp_gateway!="::"&&!isValidGLUIP6AddrStrict(temp_gateway)&&!isLinkLocalAddr(temp_gateway)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("stc_ip6_gateway");if(element){element.focus();element.select()}return false}else{temp_gateway=formatIPv6(temp_gateway)}}wan_iplistarg_sta.X_TP_ExternalIPv6Address=temp_ip6;wan_iplistarg_sta.X_TP_PrefixLength=temp_plen;wan_iplistarg_sta.X_TP_DefaultIPv6Gateway=(temp_gateway)?temp_gateway:"::";if(wan_iplistarg_sta.X_TP_DefaultIPv6Gateway!="::"){wan_iplistarg_sta.X_TP_DefaultIPv6GatewayOverride=1}var temp_dnsaddr=$.id("dns6_address").value;var temp_secdnsaddr=$.id("second_dns6").value;var temp_dnsServers="";if($.id("stc_ip6_elem_enable").checked==1){if(temp_dnsaddr!=""&&temp_dnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_dnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_address");if(element){element.focus();element.select()}return false}else{temp_dnsaddr=formatIPv6(temp_dnsaddr)}if(temp_secdnsaddr!=""&&temp_secdnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_secdnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("second_dns6");if(element){element.focus();element.select()}return false}else{temp_secdnsaddr=formatIPv6(temp_secdnsaddr)}}temp_dnsaddr=(temp_dnsaddr)?temp_dnsaddr:"::";temp_secdnsaddr=(temp_secdnsaddr)?temp_secdnsaddr:"::";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;if(temp_dnsServers!="::,::"&&temp_secdnsaddr==temp_dnsaddr){$.alert(ERR_WAN6_DNS_CONFLICT);element=$.id("second_dns6");if(element){element.focus();element.select()}return false}wan_iplistarg_sta.X_TP_IPv6DNSOverrideAllowed=((temp_dnsServers=="::,::")?0:1);wan_iplistarg_sta.X_TP_IPv6DNSServers=temp_dnsServers;if(INCLUDE_IPV6_MLD){wan_iplistarg_sta.X_TP_MLDProxyEnabled=$.id("ip_mld_en").checked?1:0}}return true}function addDynIpAttrs(){wan_iplistarg_dyn.X_TP_PDEnabled=PDEnable;wan_iplistarg_dyn.NATEnabled=$.id("dyn_enable_nat").checked?1:0;wan_iplistarg_dyn.X_TP_FullconeNATEnabled=$.id("dyn_enable_fullnat").checked?1:0;wan_iplistarg_dyn.X_TP_FirewallEnabled=$.id("dyn_ip_spi_en").checked?1:0;wan_iplistarg_dyn.X_TP_IGMPProxyEnabled=$.id("dyn_ip_igmp_en").checked?1:0;if(($.id("dyn_mtu").value>=576)&&($.id("dyn_mtu").value<=1500)){wan_iplistarg_dyn.MaxMTUSize=parseInt($.id("dyn_mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("dyn_mtu");if(element){element.focus();element.select()}return false}if($.id("dynamic_manual_dns").checked==1){wan_iplistarg_dyn.DNSOverrideAllowed=1;var temp_dnsaddr=$.id("dyn_dns1").value;var temp_secdnsaddr=$.id("dyn_dns2").value;var temp_dnsServers="";if(!INCLUDE_IPV6||$.id("dyn_ip4_elem_enable").checked==1){if((temp_dnsaddr!="")&&(temp_dnsaddr!="0.0.0.0")&&($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("second_dns");if(element){element.focus();element.select()}return false}}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";if(!INCLUDE_IPV6||$.id("dyn_ip4_elem_enable").checked==1){if((temp_dnsaddr+","+temp_secdnsaddr)=="0.0.0.0,0.0.0.0"){$.alert(ERR_WAN_DNS_INVAD);element=$.id("dns_address");if(element){element.focus();element.select()}return false}}wan_iplistarg_dyn.DNSServers=temp_dnsaddr+","+temp_secdnsaddr}else{wan_iplistarg_dyn.DNSOverrideAllowed=0}if(!charCompareA($.id("hostname").value,63,0)){$.alert(ERR_WAN_HOST_NAME_INVALID);var element=$.id("hostname");if(element){element.focus();element.select()}return false}wan_iplistarg_dyn.X_TP_Hostname=$.id("hostname").value;wan_iplistarg_dyn.X_TP_Unicast=$.id("unicast").checked==1?1:0;if(INCLUDE_IPV6){wan_iplistarg_dyn.X_TP_IPv4Enabled=($.id("dyn_ip4_elem_enable").checked==1)?1:0;wan_iplistarg_dyn.X_TP_IPv6Enabled=($.id("dyn_ip6_elem_enable").checked==1)?1:0;if(wan_iplistarg_dyn.X_TP_IPv4Enabled==0&&wan_iplistarg_dyn.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}wan_iplistarg_dyn.X_TP_IPv6AddressingType="DHCPv6";if(INCLUDE_IPV6_SLAAC){if($.id("dyn_ip6addr_type").value=="autoip"){wan_iplistarg_dyn.X_TP_IPv6AddressingType="SLAAC"}}if(INCLUDE_IP6_WAN_NOT_ASSIGN_ADDR){if($.id("dyn_hide_addr_config").checked){wan_iplistarg_dyn.X_TP_IPv6AddressingType="None"}}if($.id("dynamic_manual_dns6").checked==1){wan_iplistarg_dyn.X_TP_IPv6DNSOverrideAllowed=1;var temp_dnsaddr=$.id("dyn_dns6_1").value;var temp_secdnsaddr=$.id("dyn_dns6_2").value;if($.id("dyn_ip6_elem_enable").checked==1){if(temp_dnsaddr!=""&&temp_dnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_dnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dyn_dns6_1");if(element){element.focus();element.select()}return false}else{temp_dnsaddr=formatIPv6(temp_dnsaddr)}if(temp_secdnsaddr!=""&&temp_secdnsaddr!="::"&&!isValidGLUIP6AddrStrict(temp_secdnsaddr)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dyn_dns6_2");if(element){element.focus();element.select()}return false}else{temp_secdnsaddr=formatIPv6(temp_secdnsaddr)}}temp_dnsaddr=(temp_dnsaddr)?temp_dnsaddr:"::";temp_secdnsaddr=(temp_secdnsaddr)?temp_secdnsaddr:"::";if($.id("dyn_ip6_elem_enable").checked==1&&(temp_dnsaddr+","+temp_secdnsaddr)=="::,::"){$.alert(ERR_WAN6_DNS_INVAD);element=$.id("dyn_dns6_1");if(element){element.focus();element.select()}return false}if(temp_secdnsaddr==temp_dnsaddr){$.alert(ERR_WAN6_DNS_CONFLICT);element=$.id("dyn_dns6_2");if(element){element.focus();element.select()}return false}wan_iplistarg_dyn.X_TP_IPv6DNSServers=temp_dnsaddr+","+temp_secdnsaddr}else{wan_iplistarg_dyn.X_TP_IPv6DNSOverrideAllowed=0}if(INCLUDE_IPV6_MLD){wan_iplistarg_dyn.X_TP_MLDProxyEnabled=$.id("dyn_ip_mld_en").checked?1:0}}return true}function addPPPoEAttrs(){wan_pppoelistarg.X_TP_PDEnabled=PDEnable;if($.id("username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("username");if(element){element.focus();element.select()}return false}wan_pppoelistarg.username=$.id("username").value;if($.id("pwd").value!=$.id("pwd2").value){$.id("pwd").value="";$.id("pwd2").value="";$.alert(ERR_PWD_INVAD);element=$.id("pwd");if(element){element.focus();element.select()}return false}wan_pppoelistarg.password=$.id("pwd").value;if(INCLUDE_SPECIAL_DIAL_MODE){wan_pppoelistarg.X_TP_SpecialDail=$.id("speDail").value}if($.id("connAlwaysOn").checked==1){wan_pppoelistarg.connectionTrigger="AlwaysOn"}else{if(($.id("idleTime").value)&&($.isnum($.id("idleTime").value))){wan_pppoelistarg.idleDisconnectTime=parseInt($.id("idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("idleTime");if(element){element.focus();element.select()}return false}if($.id("connOnDemand").checked==1){wan_pppoelistarg.connectionTrigger="OnDemand"}else{if($.id("connManual").checked==1){wan_pppoelistarg.connectionTrigger="Manual"}}}wan_pppoelistarg.PPPAuthenticationProtocol=$.id("ppp_authpro").value;wan_pppoelistarg.PPPoEACName=$.id("acName").value;wan_pppoelistarg.PPPoEServiceName=$.id("serviceName").value;if(($.id("pppmtu").value>=576)&&($.id("pppmtu").value<=1492)){wan_pppoelistarg.maxMRUSize=parseInt($.id("pppmtu").value,10)}else{$.alert(ERR_WAN_PPPOE_MTU_INVAD);element=$.id("pppmtu");if(element){element.focus();element.select()}return false}wan_pppoelistarg.NATEnabled=1;wan_pppoelistarg.X_TP_FullconeNATEnabled=($.id("ppp_fullnat_en").checked==1)?1:0;wan_pppoelistarg.X_TP_FirewallEnabled=($.id("ppp_spi_en").checked==1)?1:0;wan_pppoelistarg.X_TP_IGMPProxyEnabled=($.id("ppp_igmp_en").checked==1)?1:0;if($.id("externIp_en").checked==1){if(($.id("externIpAddr").value!="")&&($.id("externIpAddr").value!="0.0.0.0")&&($.ifip($.id("externIpAddr").value,true))&&(!INCLUDE_IPV6||$.id("ppp_ip4_elem_enable").checked==1)){$.alert(ERR_IP_FORMAT);element=$.id("externIpAddr");if(element){element.focus();element.select()}return false}wan_pppoelistarg.externalIPAddress=($.id("externIpAddr").value)?$.ip2ip($.id("externIpAddr").value):"0.0.0.0";wan_pppoelistarg.X_TP_UseStaticIP=1}else{if($.id("externIp_en").checked==0){wan_pppoelistarg.X_TP_UseStaticIP=0}}if((parseInt($.id("ppp_echotime").value,10)>=0)&&(parseInt($.id("ppp_echotime").value,10)<=120)){wan_pppoelistarg.PPPLCPEcho=parseInt($.id("ppp_echotime").value,10)}else{$.alert(ERR_WAN_ECHOTIME_INVAD);element=$.id("ppp_echotime");if(element){element.focus();element.select()}return false}if($.id("dns_en").checked==1&&(!INCLUDE_IPV6||$.id("ppp_ip4_elem_enable").checked==1)){if(($.id("dns1").value!="")&&($.id("dns1").value!="0.0.0.0")&&($.ifip($.id("dns1").value,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("dns1");if(element){element.focus();element.select()}return false}if(($.id("dns2").value!="")&&($.id("dns2").value!="0.0.0.0")&&($.ifip($.id("dns2").value,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("dns2");if(element){element.focus();element.select()}return false}var tmpDns1=($.id("dns1").value)?$.ip2ip($.id("dns1").value):"0.0.0.0";var tmpDns2=($.id("dns2").value)?$.ip2ip($.id("dns2").value):"0.0.0.0";wan_pppoelistarg.DNSOverrideAllowed=1;wan_pppoelistarg.DNSServers=tmpDns1+","+tmpDns2}else{wan_pppoelistarg.DNSOverrideAllowed=0}if(INCLUDE_IPV6){wan_pppoelistarg.X_TP_IPv4Enabled=($.id("ppp_ip4_elem_enable").checked==1)?1:0;wan_pppoelistarg.X_TP_IPv6Enabled=($.id("ppp_ip6_elem_enable").checked==1)?1:0;if(wan_pppoelistarg.X_TP_IPv4Enabled==0&&wan_pppoelistarg.X_TP_IPv6Enabled==0){$.alert(ERR_WAN6_IP_STACK_NONE);return false}if($.id("ppp_ip6_elem_enable").checked==1&&$.id("externIp6_en").checked==1){if(!isValidGLUIP6AddrStrict($.id("externIp6Addr").value)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("externIp6Addr");if(element){element.focus();element.select()}return false}var tmp_ip6Gateway=$.id("externIp6Gateway").value;if(tmp_ip6Gateway!=""&&tmp_ip6Gateway!="::"&&!isValidGLUIP6AddrStrict(tmp_ip6Gateway)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("externIp6Gateway");if(element){element.focus();element.select()}return false}else{tmp_ip6Gateway=formatIPv6(tmp_ip6Gateway)}wan_pppoelistarg.X_TP_IPv6AddressingType="Static";wan_pppoelistarg.X_TP_ExternalIPv6Address=formatIPv6($.id("externIp6Addr").value);wan_pppoelistarg.X_TP_PrefixLength=64;wan_pppoelistarg.X_TP_DefaultIPv6Gateway=(tmp_ip6Gateway)?tmp_ip6Gateway:"::";if(wan_pppoelistarg.X_TP_DefaultIPv6Gateway!="::"){wan_pppoelistarg.X_TP_DefaultIPv6GatewayOverride=1}}else{wan_pppoelistarg.X_TP_IPv6AddressingType="DHCPv6";if(INCLUDE_IPV6_SLAAC){if($.id("ppp_ip6addr_type").value=="autoip"){wan_pppoelistarg.X_TP_IPv6AddressingType="SLAAC"}}if(INCLUDE_IP6_WAN_NOT_ASSIGN_ADDR){if($.id("ppp_hide_addr_config").checked){wan_pppoelistarg.X_TP_IPv6AddressingType="None"}}}if($.id("ppp_ip6_elem_enable").checked==1&&$.id("dns6_en").checked==1){var tmpDns1=$.id("dns6_1").value;var tmpDns2=$.id("dns6_2").value;if(tmpDns1!=""&&tmpDns1!="::"&&!isValidGLUIP6AddrStrict(tmpDns1)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_1");if(element){element.focus();element.select()}return false}else{tmpDns1=formatIPv6(tmpDns1)}if(tmpDns2!=""&&tmpDns2!="::"&&!isValidGLUIP6AddrStrict(tmpDns2)){$.alert(ERR_WAN6_ADDR_INVAD);element=$.id("dns6_2");if(element){element.focus();element.select()}return false}else{tmpDns2=formatIPv6(tmpDns2)}tmpDns1=(tmpDns1)?tmpDns1:"::";tmpDns2=(tmpDns2)?tmpDns2:"::";if((tmpDns1+","+tmpDns2)=="::,::"){$.alert(ERR_WAN6_DNS_INVAD);element=$.id("dns6_1");if(element){element.focus();element.select()}return false}if(tmpDns2==tmpDns1){$.alert(ERR_WAN6_DNS_CONFLICT);element=$.id("dns6_2");if(element){element.focus();element.select()}return false}wan_pppoelistarg.X_TP_IPv6DNSOverrideAllowed=1;wan_pppoelistarg.X_TP_IPv6DNSServers=tmpDns1+","+tmpDns2}else{}if(INCLUDE_IPV6_MLD){wan_pppoelistarg.X_TP_MLDProxyEnabled=$.id("ppp_mld_en").checked?1:0}}if($.id("ppp_same_session").checked==true){PPPoEStk=PPPoEv4Stk;PPPoEEnable=PPPoEv4Enable;wan_pppoelistarg.X_TP_IPv6Enabled=1;PPPoESetConnection="ewan_pppoe"}else{PPPoEStk=PPPoEv6Stk;PPPoEEnable=PPPoEv6Enable;PPPoESetConnection="ewan_pppoev6"}return true}function addL2tpAttrs(){if($.id("ppp_username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("ppp_username");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.username=$.id("ppp_username").value;if($.id("ppp_pwd").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("ppp_pwd");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.password=$.id("ppp_pwd").value;if($.id("srvAddrName").value==""){$.alert(ERR_WAN_DA_SERVER_NAME_EMPTY);element=$.id("srvAddrName");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.serverIpOrName=$.id("srvAddrName").value;if($.id("ipType_stc").checked==1){var temp_ip=$.id("isp_ip_stc").value;var temp_mask=$.id("isp_net_mask_stc").value;var temp_gateway=$.id("isp_gw_stc").value;wan_l2tp_listarg.addressingType="Static";if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_l2tp_listarg.externalIPAddressIP=$.ip2ip(temp_ip);wan_l2tp_listarg.subnetMaskIP=$.ip2ip(temp_mask)}else{return false}if((temp_gateway=="")||(temp_gateway!="0.0.0.0"&&$.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}if((temp_gateway=="0.0.0.0")||(!isSameLan(temp_gateway,temp_mask,temp_ip,temp_mask))){$.alert(ERR_GATEWAY_INVAD);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}wan_l2tp_listarg.defaultGatewayIP=$.ip2ip(temp_gateway);var temp_dnsaddr=$.id("isp_dns_1_stc").value;var temp_secdnsaddr=$.id("isp_dns_2_stc").value;var temp_dnsServers="";if((temp_dnsaddr!="")&&(temp_dnsaddr!="0.0.0.0")&&($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("isp_dns_2_stc");if(element){element.focus();element.select()}return false}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_l2tp_listarg.DNSServersIP=temp_dnsServers;if($.ifip(wan_l2tp_listarg.serverIpOrName,true)&&temp_dnsaddr=="0.0.0.0"&&temp_secdnsaddr=="0.0.0.0"){$.alert(ERR_WAN_DA_DNS_EMPTY);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}}else{wan_l2tp_listarg.addressingType="DHCP"}if(($.id("l2tp_mtu").value>=576)&&($.id("l2tp_mtu").value<=1500)){wan_l2tp_listarg.maxMRUSize=parseInt($.id("l2tp_mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("l2tp_mtu");if(element){element.focus();element.select()}return false}if($.id("da_connAlwaysOn").checked==1){wan_l2tp_listarg.connectionTrigger="AlwaysOn"}else{if(($.id("da_idleTime").value)&&($.isnum($.id("da_idleTime").value))){wan_l2tp_listarg.idleDisconnectTime=parseInt($.id("da_idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("da_idleTime");if(element){element.focus();element.select()}return false}if($.id("da_connOnDemand").checked==1){wan_l2tp_listarg.connectionTrigger="OnDemand"}else{if($.id("da_connManual").checked==1){wan_l2tp_listarg.connectionTrigger="Manual"}}}return true}function addPptpAttrs(){if($.id("ppp_username").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("ppp_username");if(element){element.focus();element.select()}return false}wan_pptp_listarg.username=$.id("ppp_username").value;if($.id("ppp_pwd").value==""){$.alert(ERR_USERNAME_INVAD);element=$.id("ppp_pwd");if(element){element.focus();element.select()}return false}wan_pptp_listarg.password=$.id("ppp_pwd").value;if($.id("srvAddrName").value==""){$.alert(ERR_WAN_DA_SERVER_NAME_EMPTY);element=$.id("srvAddrName");if(element){element.focus();element.select()}return false}wan_pptp_listarg.serverIpOrName=$.id("srvAddrName").value;if($.id("ipType_stc").checked==1){var temp_ip=$.id("isp_ip_stc").value;var temp_mask=$.id("isp_net_mask_stc").value;var temp_gateway=$.id("isp_gw_stc").value;wan_pptp_listarg.addressingType="Static";if((!$.ifip(temp_ip))&&(!$.mask(temp_mask))&&(!$.ipmask(temp_ip,temp_mask))){wan_pptp_listarg.externalIPAddressIP=$.ip2ip(temp_ip);wan_pptp_listarg.subnetMaskIP=$.ip2ip(temp_mask)}else{return false}if((temp_gateway=="")||(temp_gateway!="0.0.0.0"&&$.ifip(temp_gateway,true))){$.alert(ERR_IP_FORMAT);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}if((temp_gateway=="0.0.0.0")||(!isSameLan(temp_gateway,temp_mask,temp_ip,temp_mask))){$.alert(ERR_GATEWAY_INVAD);element=$.id("isp_gw_stc");if(element){element.focus();element.select()}return false}wan_pptp_listarg.defaultGatewayIP=$.ip2ip(temp_gateway);var temp_dnsaddr=$.id("isp_dns_1_stc").value;var temp_secdnsaddr=$.id("isp_dns_2_stc").value;var temp_dnsServers="";if((temp_dnsaddr!="")&&(temp_dnsaddr!="0.0.0.0")&&($.ifip(temp_dnsaddr,true))){$.alert(ERR_WAN_DNSADDR_INVAD);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}if((temp_secdnsaddr!="")&&(temp_secdnsaddr!="0.0.0.0")&&($.ifip(temp_secdnsaddr,true))){$.alert(ERR_WAN_SECDNS_INVAD);element=$.id("isp_dns_2_stc");if(element){element.focus();element.select()}return false}temp_dnsaddr=(temp_dnsaddr)?$.ip2ip(temp_dnsaddr):"0.0.0.0";temp_secdnsaddr=(temp_secdnsaddr)?$.ip2ip(temp_secdnsaddr):"0.0.0.0";temp_dnsServers=temp_dnsaddr+","+temp_secdnsaddr;wan_pptp_listarg.DNSServersIP=temp_dnsServers;if($.ifip(wan_pptp_listarg.serverIpOrName,true)&&temp_dnsaddr=="0.0.0.0"&&temp_secdnsaddr=="0.0.0.0"){$.alert(ERR_WAN_DA_DNS_EMPTY);element=$.id("isp_dns_1_stc");if(element){element.focus();element.select()}return false}}else{wan_pptp_listarg.addressingType="DHCP"}if(($.id("pptp_mtu").value>=576)&&($.id("pptp_mtu").value<=1500)){wan_pptp_listarg.maxMRUSize=parseInt($.id("pptp_mtu").value,10)}else{$.alert(ERR_WAN_MTU_INVAD);element=$.id("pptp_mtu");if(element){element.focus();element.select()}return false}if($.id("da_connAlwaysOn").checked==1){wan_pptp_listarg.connectionTrigger="AlwaysOn"}else{if(($.id("da_idleTime").value)&&($.isnum($.id("da_idleTime").value))){wan_pptp_listarg.idleDisconnectTime=parseInt($.id("da_idleTime").value,10)}else{$.alert(ERR_IDLETIME_INVAD);element=$.id("da_idleTime");if(element){element.focus();element.select()}return false}if($.id("da_connOnDemand").checked==1){wan_pptp_listarg.connectionTrigger="OnDemand"}else{if($.id("da_connManual").checked==1){wan_pptp_listarg.connectionTrigger="Manual"}}}return true}function addTunnelAttrs(){var wanIntfName;wan6MainTunnelAttrs.enabled=1;wan6MainTunnelAttrs.mechanism=2;wanInfName=wan4ConnName;if((wanInfName=="No available interface.")){$.removeLoading($.id("saveBtn"));$.alert(ERR_IP6_WAN_CONN_NONE);return false}if(!wanInfName){if(!wan6MainTunnelAttrs.localAddress){wan6MainTunnelAttrs.localAddress="0.0.0.0"}}else{for(var i=0;i<wanIPv4List.length;i++){if(wanIPv4List[i].name==wanInfName){wan6MainTunnelAttrs.associatedWanIfName=wanIPv4List[i].X_TP_IfName;wan6MainTunnelAttrs.localAddress=wanIPv4List[i].externalIPAddress;break}}for(var i=0;i<wanPPPv4List.length;i++){if(wanPPPv4List[i].name==wanInfName){wan6MainTunnelAttrs.associatedWanIfName=wanPPPv4List[i].X_TP_IfName;wan6MainTunnelAttrs.localAddress=wanPPPv4List[i].externalIPAddress;break}}for(var i=0;i<wanL2tpConList.length;i++){if(wanL2tpConList[i].name==wanInfName){wan6MainTunnelAttrs.associatedWanIfName=wanL2tpConList[i].ifName;wan6MainTunnelAttrs.localAddress=wanL2tpConList[i].externalIPAddress;break}}for(var i=0;i<wanPptpConList.length;i++){if(wanPptpConList[i].name==wanInfName){wan6MainTunnelAttrs.associatedWanIfName=wanPptpConList[i].ifName;wan6MainTunnelAttrs.localAddress=wanPptpConList[i].externalIPAddress;break}}}return true}function doSave(val){var linkType=$.id("link_type").value;if($.id("wan_enable_ipv6").checked==false){linkType="disabled"}if(linkType=="staticIp"){var ret;if(!(ret=addStaticIpAttrs())){return}}else{if(linkType=="dynamicIp"){var ret;if(!(ret=addDynIpAttrs())){return}}else{if(linkType=="pppoe"){var ret;if(!(ret=addPPPoEAttrs())){return}}else{if(linkType=="l2tp"){var ret;if(!(ret=addL2tpAttrs())){return}}else{if(linkType=="pptp"){var ret;if(!(ret=addPptpAttrs())){return}}else{if(linkType=="6to4"){var ret;if(!(ret=addTunnelAttrs())){return}}else{if(linkType=="disabled"){}}}}}}}$.addLoading($.id("saveBtn"));var ethEnable=$.id("ethWan_en").checked?1:0;if(ethEnable==0){$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["enable=0"])}else{if(ethEnable==1){$.act(ACT_SET,WAN_ETH_INTF,pStk,null,["enable=1"])}}if(linkType=="staticIp"){if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv6Stk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv4v6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv4Stk,null,["X_TP_IPv6Enabled=0","X_TP_PDEnabled=0"])}if(wan6to4Enable==1){$.act(ACT_SET,IP6_TUNNEL,wan6to4Stk,null,["enabled=0"])}if((ethEnable==0)&&(staticEnable==1)){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(!$.exe()){if(wan6to4Enable==1){wan_iplistarg_sta.X_TP_PDEnabled=1;PDEnable=1}wan_iplistarg_sta.enable=1;$.act(ACT_SET,IPV6_CFG,IPv6CfgStk,null,["disableIPv6=0"]);$.act(ACT_SET,WAN_IP_CONN,staticStk,null,wan_iplistarg_sta);if((PDEnable==1)&&(staticEnable!=1)){$.act(ACT_SET,LAN_IP6_HOST_CFG,lan6HostStk,null,["IPv6PDWANConnection=ewan_ipoev6_s"])}}else{return}}else{if(linkType=="dynamicIp"){if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv6Stk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv4v6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv4Stk,null,["X_TP_IPv6Enabled=0","X_TP_PDEnabled=0"])}if(wan6to4Enable==1){$.act(ACT_SET,IP6_TUNNEL,wan6to4Stk,null,["enabled=0"])}if((ethEnable==0)&&(dynEnable==1)){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(!$.exe()){if(wan6to4Enable==1){wan_iplistarg_dyn.X_TP_PDEnabled=1;PDEnable=1}wan_iplistarg_dyn.enable=1;$.act(ACT_SET,IPV6_CFG,IPv6CfgStk,null,["disableIPv6=0"]);$.act(ACT_SET,WAN_IP_CONN,dynStk,null,wan_iplistarg_dyn);if((PDEnable==1)&&(dynEnable!=1)){$.act(ACT_SET,LAN_IP6_HOST_CFG,lan6HostStk,null,["IPv6PDWANConnection=ewan_ipoev6_d"])}}else{return}}else{if(linkType=="pppoe"){if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0","X_TP_PDEnabled=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0","X_TP_PDEnabled=0"])}if(wan6to4Enable==1){$.act(ACT_SET,IP6_TUNNEL,wan6to4Stk,null,["enabled=0"])}if(PPPoEv6Enable==1&&PPPoESetConnection!="ewan_pppoev6"){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv6Stk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv4v6Enable==1&&PPPoESetConnection!="ewan_pppoe"){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv4Stk,null,["X_TP_IPv6Enabled=0","X_TP_PDEnabled=0"])}if(!$.exe()){if(wan6to4Enable==1){wan_pppoelistarg.X_TP_PDEnabled=1;PDEnable=1}wan_pppoelistarg.enable=1;$.act(ACT_SET,IPV6_CFG,IPv6CfgStk,null,["disableIPv6=0"]);$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,wan_pppoelistarg);if(PDEnable==1){if(PPPoESetConnection=="ewan_pppoev6"&&PPPoEv6Enable!=1){$.act(ACT_SET,LAN_IP6_HOST_CFG,lan6HostStk,null,["IPv6PDWANConnection=ewan_pppoev6"])}else{if(PPPoESetConnection=="ewan_pppoe"&&PPPoEv4v6Enable!=1){$.act(ACT_SET,LAN_IP6_HOST_CFG,lan6HostStk,null,["IPv6PDWANConnection=ewan_pppoe"])}}}}else{return}}else{if(linkType=="l2tp"){if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(pptpEnable==1){$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,["enable=0"])}if((ethEnable==0)&&(l2tpEnable==1)){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if(!$.exe()){wan_l2tp_listarg.enable=1;$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,wan_l2tp_listarg)}else{return}}else{if(linkType=="pptp"){if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0"])}if(PPPoEEnable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEStk,null,["enable=0"])}if(l2tpEnable==1){$.act(ACT_SET,WAN_L2TP_CONN,l2tpStk,null,["enable=0"])}if((ethEnable==0)&&(pptpEnable==1)){$.act(ACT_SET,WAN_L2TP_CONN,pptpStk,null,["enable=0"])}if(!$.exe()){wan_pptp_listarg.enable=1;$.act(ACT_SET,WAN_PPTP_CONN,pptpStk,null,wan_pptp_listarg)}else{return}}else{if(linkType=="6to4"){if(staticEnable==1){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0","X_TP_PDEnabled=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv6Stk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv4v6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv4Stk,null,["X_TP_IPv6Enabled=0","X_TP_PDEnabled=0"])}if(!$.exe()){$.act(ACT_SET,IPV6_CFG,IPv6CfgStk,null,["disableIPv6=0"]);$.act(ACT_SET,IP6_TUNNEL,wan6to4Stk,null,wan6MainTunnelAttrs)}else{return}}else{if(linkType=="disabled"){if((staticEnable==1)){$.act(ACT_SET,WAN_IP_CONN,staticStk,null,["enable=0","X_TP_PDEnabled=0"])}if(dynEnable==1){$.act(ACT_SET,WAN_IP_CONN,dynStk,null,["enable=0","X_TP_PDEnabled=0"])}if(PPPoEv6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv6Stk,null,["enable=0","X_TP_PDEnabled=0"])}if(wan6to4Enable==1){$.act(ACT_SET,IP6_TUNNEL,wan6to4Stk,null,["enabled=0"])}if(PPPoEv4v6Enable==1){$.act(ACT_SET,WAN_PPP_CONN,PPPoEv4Stk,null,["X_TP_IPv6Enabled=0","X_TP_PDEnabled=0"])}if(PDEnable==1){$.act(ACT_SET,LAN_IP6_HOST_CFG,lan6HostStk,null,["IPv6PDWANConnection="])}$.act(ACT_SET,IPV6_CFG,IPv6CfgStk,null,["disableIPv6=1"]);if(!$.exe()){$.reload()}}}}}}}}$.exe(function(err){if(!err){if(val==0){if($.id("link_type").value=="staticIp"){var ipConn=$.act(ACT_GET,WAN_IP_CONN,staticStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=ipConn.name}else{return}}else{if($.id("link_type").value=="dynamicIp"){var ipConn=$.act(ACT_GET,WAN_IP_CONN,dynStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=ipConn.name}else{return}}else{if($.id("link_type").value=="pppoe"){var pppConn=$.act(ACT_GET,WAN_PPP_CONN,PPPoEStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=pppConn.name}else{return}}else{if($.id("link_type").value=="l2tp"){var l2tpConn=$.act(ACT_GET,WAN_L2TP_CONN,l2tpStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=l2tpConn.name}else{return}}else{if($.id("link_type").value=="pptp"){var pptpConn=$.act(ACT_GET,WAN_PPTP_CONN,pptpStk,null,["name"]);if(!$.exe()){l3ForwardingObj.__ifAliasName=pptpConn.name}else{return}}}}}}l3ForwardingObj.__ifName="";l3ForwardingObj.defaultConnectionService="";if(INCLUDE_IPV6){l3Ip6ForwardingObj.__ifAliasName=l3ForwardingObj.__ifAliasName;l3Ip6ForwardingObj.__ifName="";l3Ip6ForwardingObj.defaultConnectionService="";ip4Enable=(wan_iplistarg_sta.X_TP_IPv4Enabled==1||wan_iplistarg_dyn.X_TP_IPv4Enabled==1||wan_pppoelistarg.X_TP_IPv4Enabled==1||wan_l2tp_listarg.enable==1||wan_pptp_listarg.enable==1)?1:0;ip6Enable=(wan_iplistarg_sta.X_TP_IPv6Enabled==1||wan_iplistarg_dyn.X_TP_IPv6Enabled==1||wan_pppoelistarg.X_TP_IPv6Enabled==1)?1:0}if(!INCLUDE_IPV6||INCLUDE_IPV6&&ip4Enable==1){$.act(ACT_SET,L3_FORWARDING,null,null,l3ForwardingObj)}if(INCLUDE_IPV6&&ip6Enable==1){$.act(ACT_SET,L3_IP6_FORWARDING,null,null,l3Ip6ForwardingObj)}if(!$.exe()){$.reload()}}}})}function doDhcp6Renew(){}function doDhcp6Release(){}function doDhcpRenew(){$.id("renew").disabled=1;$.act(ACT_OP,ACT_OP_DHCP_RENEW,wan_iplist_dyn.__stack);$.removeClass($.id("DynIpConnecting"),"nd");$.addLoading($.id("renew"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDhcpRelease(){$.id("release").disabled=1;$.act(ACT_OP,ACT_OP_DHCP_RELEASE,wan_iplist_dyn.__stack);$.addLoading($.id("release"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doConn(){doSave(1);$.id("conn").disabled=1;$.act(ACT_OP,ACT_OP_PPP_CONN,wan_pppoelist.__stack);$.removeClass($.id("PPPoEConnecting"),"nd");$.addLoading($.id("conn"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDisConn(){$.id("disConn").disabled=1;$.act(ACT_OP,ACT_OP_PPP_DISCONN,wan_pppoelist.__stack);$.addLoading($.id("disConn"));if(!$.exe()){doSave(1);$.timeout(function(){$.reload()},1500)}}function doConn2(){doSave(0);$.id("conn2").disabled=1;if($.id("link_type").value=="l2tp"){$.act(ACT_OP,ACT_OP_L2TP_CONN,wan_l2tp_list.__stack)}else{if($.id("link_type").value=="pptp"){$.act(ACT_OP,ACT_OP_PPTP_CONN,wan_pptp_list.__stack)}}$.removeClass($.id("L2tpPptpConnecting"),"nd");$.addLoading($.id("conn2"));if(!$.exe()){$.timeout(function(){$.reload()},1500)}}function doDisConn2(){$.id("disConn2").disabled=1;if($.id("link_type").value=="l2tp"){$.act(ACT_OP,ACT_OP_L2TP_DISCONN,wan_l2tp_list.__stack)}else{if($.id("link_type").value=="pptp"){$.act(ACT_OP,ACT_OP_PPTP_DISCONN,wan_pptp_list.__stack)}}$.addLoading($.id("disConn2"));if(!$.exe()){doSave(1);$.timeout(function(){$.reload()},1500)}}function checkPwd(){if($.id("pwd2").value!=$.id("pwd").value){$.id("pwd").value="";$.id("pwd2").value="";$.alert(ERR_PWD_INVAD);element=$.id("pwd");if(element){element.focus();element.select()}return false}}function showDyn(){$.removeClass($.id("l2tp_pptp_dyn_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_stc_ip_elem"),"nd")}function showStc(){$.removeClass($.id("l2tp_pptp_stc_ip_elem"),"nd");$.addClass($.id("l2tp_pptp_dyn_ip_elem"),"nd")}function showPPPSameSession(){var checkSameSession=$.id("ppp_same_session").checked;if(checkSameSession==true){$.addClass($.id("ppp_session_basic"),"nd");$.addClass($.id("ppp_session_adv"),"nd")}else{$.removeClass($.id("ppp_session_basic"),"nd");$.removeClass($.id("ppp_session_adv"),"nd")}}function checkPPPoESameSession(){var checkSameSession=$.id("ppp_same_session").checked;if(checkSameSession==true){$.reload("pppoe:1:1")}else{$.reload("pppoe:1:0")}}function initDisabledIPv6(){$.loadHelpFrame("Wan6DisabledCfgHelpRpm.htm");$.addClass($.id("ip_elem_basic"),"nd");$.addClass($.id("ipoeClick"),"nd");$.addClass($.id("ip_elem_adv"),"nd");$.addClass($.id("dyn_ip_elem_basic"),"nd");$.addClass($.id("dyn_ip_elem_adv"),"nd");$.addClass($.id("dynipClick"),"nd");$.addClass($.id("pppoe_elem_basic"),"nd");$.addClass($.id("pppoe_elem_adv"),"nd");$.addClass($.id("pppoeClick"),"nd");$.addClass($.id("wan_select"),"nd")}function changeIPv6Disable(){if($.id("wan_enable_ipv6").checked==true){$.id("link_type").disabled=false}else{$.id("link_type").disabled=true}showLnkType()}function hideAutoAddrConfig(type){if(type=="dyn"){$.id("dyn_ip6addr_type").disabled=$.id("dyn_hide_addr_config").checked}else{if(type=="ppp"){$.id("ppp_ip6addr_type").disabled=$.id("ppp_hide_addr_config").checked;$.id("externIp6_en").disabled=$.id("ppp_hide_addr_config").checked}}};</script>
<p class="et T" id="et">IPv6 WAN </p>
<div class="con1 L">
<p class="ct"></p>
<p class="bl"></p>
<div class="con2">

<p id="ethEnable" class="L1"><input type="checkbox" id="ethWan_en" checked /><span class="T" id="t_en">Enable WAN connection</span></p>
<p class="br"></p>
<p class="IPv6 nd">
	<b class="item L T T_ip6en">Enable IPv6</b>
	<input type="checkbox" class="T" id="wan_enable_ipv6" onclick="changeIPv6Disable();" checked />
</p>
<p id="wan_conn_type"><b class="item L T T_conntype">Connetion Type</b>
<select id="link_type" class="M" onchange="showLnkType();" >
<option class="T T_dynip6" id="dynamicIp" value="dynamicIp" selected >Dynamic IPv6</option>
<option class="T T_staip6" id="staticIp" value="staticIp">Static IPv6</option>
<option id="pppoe" value="pppoe" >PPPoEv6</option>
<option class="T T_type6to4" id="t_6to4" value="6to4">Tunnel 6to4</option>
</select></p>
<p class="br"></p>

<div id="dyn_ip_elem_basic">
	<div id="dyn_ipx_check4" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" class="T" id="dyn_ip4_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="dyn_ip4_elem_basic">
		<p><b class="item L T T_ipaddr" id="ip_addr1">IP Address:</b><b style="padding-left:12px" id="dyn_ip">0.0.0.0</b></p>
		<p><b class="item L T T_netmask" id="subnet_mask1">Subnet Mask:</b><b style="padding-left:12px" id="dyn_mask">0.0.0.0</b></p>
		<p><b class="item L T T_gateway" id="gateway1">Gateway:</b><b style="padding-left:12px" id="dyn_gw">0.0.0.0</b></p>
		<p class="br"></p>
		<p><b class="item">&nbsp;</b><input type="button" class="button M T T_renew" id="renew" value="Renew" disabled onclick="doDhcpRenew()"/>
		<input type="button" class="button M T T_release" id="release" value="Release" disabled onclick="doDhcpRelease()"/>
		<span id="DynIpConnecting" class="nd">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
		</p>
	</div>
	<p class="br IPv6 nd"></p>
	<div id="dyn_ipx_check6" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" class="T" id="dyn_ip6_elem_enable" onclick="ShowDiv(this)" /></p>
	</div>
	<div id="dyn_ip6_elem_basic" class="nd">
		<p><b class="item L T T_ip6addr">IPv6 Address:</b><b style="padding-left:12px" id="dyn_ip6_addr">::</b></p>
		<p><b class="item L T T_plen">Prefix Length:</b><b style="padding-left:12px" id="dyn_prefix_len">0</b></p>
		<p><b class="item L T T_ip6gw">IPv6 Gateway:</b><b style="padding-left:12px" id="dyn_ip6_gw">::</b></p>
		<p id="dyn_hide_addr_check" class="nd" ><b class="item L">&nbsp;</b>
		<label>
			<input type="checkbox" id="dyn_hide_addr_config" onclick="hideAutoAddrConfig('dyn')" />
			<span class="T" id="t_dyn_hide_addr_config">Only Get Prefix Infomation</span>
		</label></p>
		<div id="ipv6_cfg_dynamic_slaac" class="IPv6 nd">
			<p class="IPv6 nd"><b class="item L T T_ip6addrconf">IPv6 Autoconfiguration Type</b>
			<select id="dyn_ip6addr_type" class="L">
			<option value="dhcp" selected="selected">DHCPv6</option>
			<option value="autoip">SLAAC</option>
			</select></p>
		</div>
	</div>
</div>

<div id="ip_elem_basic" class="nd">
	<div id="stc_ipx_check4" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" class="T" id="stc_ip4_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="stc_ip4_elem_basic">
		<p><b class="item L T T_ipaddr">IP Address:</b><input type="text" class="text" id="ip_address" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_netmask">Subnet Mask:</b><input type="text" class="text" id="netmask" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_gateway">Gateway:</b><input type="text" class="text" id="ip_gateway" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" id="dns_address" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" id="second_dns" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
	</div>
	<p class="br IPv6 nd"></p>
	<div id="stc_ipx_check6" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" class="T" id="stc_ip6_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	<div id="stc_ip6_elem_basic" class="nd">
		<p><b class="item L T T_ip6addr">IPv6 Address:</b><input type="text" class="text" id="stc_ip6_addr" value="::" size="15" maxlength="40" /></p>
		<p><b class="item L T T_plen">Prefix Length:</b><input type="text" class="text" id="stc_prefix_len" value="64" size="15" maxlength="15" /></p>
		<p><b class="item L T T_ip6gw">IPv6 Gateway:</b><input type="text" class="text" id="stc_ip6_gateway" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
		<p><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" id="dns6_address" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
		<p><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" id="second_dns6" value="::" size="15" maxlength="40" /><span class="T T_optional">(Optional)</span></p>
	</div>
</div>

<div id="pppoe_elem_basic" class="nd">
	<p>
		<b class="item L">&nbsp;</b>
		<label>
			<input type="checkbox" id="ppp_same_session" onclick="checkPPPoESameSession();" />
			<span class="T" id="t_ppp_same_sess">PPPoE same session with IPv4 PPPoE connection</span>
		</label>
	</p>
	<div id="ppp_session_basic">
	<p class="L1"></p>
	<p><b class="item L T T_pppusr">PPP Username:</b><input type="text" class="text" size="15" id="username" maxlength="63" /></p>
	<p><b class="item L T T_ppppwd">PPP Password:</b><input type="password" class="text" size="15" id="pwd" maxlength="63" /></p>
	<p><b class="item L T T_cfmpwd">Confirm Password:</b><input type="password" class="text" size="15" id="pwd2" maxlength="63" onchange="checkPwd();" /></p>
	<p class="nd"><b class="item L">Special Dial:</b><select id="speDail" onchange="" >
	<option id="dail0" value=0 selected >Normal dial mode</option>
	<option id="dail1" value=1>Special dial mode 1</option>
	<option id="dail2" value=2>Special dial mode 2</option>
	<option id="dail3" value=3>Special dial mode 3</option>
	<option id="dail4" value=4>Special dial mode 4</option>
	<option id="dail5" value=5>Special dial mode 5</option>
	<option id="dail6" value=6>Special dial mode 6</option>
	<option id="dail7" value=7>Special dial mode 7</option>
	</select></p>
	<p class="br"></p>
	<div id="pppoe_conn_mode" class="nd">
	<p class="L1"><b class="item T T_connmode">Connection Mode:</b><input type="radio" name="linkMode" id="connAlwaysOn" checked /> <span class="T T_typeauto">Connect automatically</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="connOnDemand" /> <span class="T T_typedemand">Connect on demand</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="connManual"/> <span class="T T_typemanual">Connect manually</span></p>
	<p><b class="item">&nbsp;</b><span class="T T_midle">Max Idle Time:</span> <input type="text" class="text" id="idleTime" size="3" maxlength="2" value="15" /> <span class="T T_minutes">minutes</span> <span class="T T_zmean">(0 means remain active at all time)</span></p>
	<p class="br"></p>
	</div>
	<p><b class="item L T T_authtype">Authentication Type:</b><select id="ppp_authpro" class="L" >
	<option id="auto_auth" value="AUTO_AUTH" selected>AUTO_AUTH</option>
	<option id="pap" value="PAP">PAP</option>
	<option id="chap" value="CHAP">CHAP</option>
	<option id="ms-chap" value="MS-CHAP">MS-CHAP</option>
	</select></p>
	<div id="pppoe_conn_but" class="nd">
	<p class="br"></p>
	<p><b class="item">&nbsp;</b><input type="button" class="button M T T_conn" id="conn" value="Connect"  disabled onclick="doConn()"/><span id="test"></span>
	<input type="button" class="button M T T_disconn" id="disConn" value="Disconnect"  disabled onclick="doDisConn()"/>
	<span id="PPPoEConnecting" class="nd T">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
	</p>
	</div>
	<p class="br IPv6 nd"></p>
	<div id="ppp_ipx_check" class="nd">
	<p class="IPv6 nd"><b class="item L T T_ip4en">Enable IPv4</b><input type="checkbox" class="T" id="ppp_ip4_elem_enable" onclick="ShowDiv(this)" checked /></p>
	<p class="IPv6 nd"><b class="item L T T_ip6en">Enable IPv6</b><input type="checkbox" class="T" id="ppp_ip6_elem_enable" onclick="ShowDiv(this)" checked /></p>
	</div>
	</div>
	<div id="ppp_ip6_elem_basic">
		<p id="ppp_hide_addr_check" class="nd" ><b class="item L">&nbsp;</b>
		<label>
			<input type="checkbox" id="ppp_hide_addr_config" onclick="hideAutoAddrConfig('ppp')" />
			<span class="T" id="t_ppp_hide_addr_config">Only Get Prefix Infomation</span>
		</label></p>
		<div id="ipv6_cfg_ppp_slaac">
			<p class="IPv6 nd"><b class="item L T T_ip6addrconf">IPv6 Autoconfiguration Type</b>
			<select id="ppp_ip6addr_type" class="L" >
			<option value="dhcp" selected="selected">DHCPv6</option>
			<option value="autoip">SLAAC</option>
			</select></p>
		</div>
	</div>
</div>

<div id="wan_select" class="nd">
<p class="nd"><b class="item L T T_wanconn">WAN Connection:</b><select id="waninf"></select></p>
<p><b class="item L T T_wanconn">cur WAN Connection:</b><span id="curwaninf"></span></p>
</div>

<div id="l2tp_pptp_elem_basic" class="nd">
	<p><b class="item L T T_username">Username:</b><input type="text" class="text" size="15" id="ppp_username" maxlength="63" /></p>
	<p><b class="item L T T_passwd">Password:</b><input type="password" class="text" size="15" id="ppp_pwd" maxlength="63" /></p>
	<p><b class="item">&nbsp;</b><input type="button" class="button M T T_conn" id="conn2" value="Connect"  disabled onclick="doConn2()"/><span id="test2"></span>
	<input type="button" class="button M T T_disconn" id="disConn2" value="Disconnect"  disabled onclick="doDisConn2()"/>
	<span id="L2tpPptpConnecting" class="nd T">&nbsp;&nbsp;<span class="T T_connecting">Connecting</span>...</span>
	</p>
	<p class="br"></p>
	<p><b class="item L T" id = "t_addrType">Addressing Type:</b>
	<input type="radio" name="ipType" id="ipType_dyn" onclick="showDyn()" checked /><span class="T T_dynip">Dynamic IP</span>
	<input type="radio" name="ipType" id="ipType_stc" onclick="showStc()" /><span class="T T_staip">Static IP</span></p>
	<p><b class="item L T T_srvIpName">Server IP Address/Name:</b><input type="text" class="text" size="15" id="srvAddrName" maxlength="80" /></p>
	<div id="l2tp_pptp_dyn_ip_elem">
		<p><b class="item L T T_ipaddr" id="isp_ip_addr">IP Address:</b><b style="padding-left:12px" id="isp_ip_dyn">0.0.0.0</b></p>
		<p><b class="item L T T_netmask" id="isp_subnet_mask">Subnet Mask:</b><b style="padding-left:12px" id="isp_net_mask_dyn">0.0.0.0</b></p>
		<p><b class="item L T T_gateway" id="isp_gateway">Gateway:</b><b style="padding-left:12px" id="isp_gw_dyn">0.0.0.0</b></p>
		<p><b class="item L T T_dns" id="isp_dns">DNS:</b><b style="padding-left:12px" id="isp_dns_1_dyn">0.0.0.0</b>,<b style="padding-left:12px" id="isp_dns_2_dyn">0.0.0.0</b></p>
	</div>
	<div id="l2tp_pptp_stc_ip_elem" class="nd">
		<p><b class="item L T T_ipaddr">IP Address:</b><input type="text" class="text" id="isp_ip_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_netmask">Subnet Mask:</b><input type="text" class="text" id="isp_net_mask_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_gateway">Gateway:</b><input type="text" class="text" id="isp_gw_stc" value="0.0.0.0" size="15" maxlength="15" /></p>
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" id="isp_dns_1_stc" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" id="isp_dns_2_stc" value="0.0.0.0" size="15" maxlength="15" /><span class="T T_optional">(optional)</span></p>
	</div>
	<p class="br"></p>
	<p><b class="item L T T_ipaddr" id="internet_ip_addr">Internet IP Address:</b><b style="padding-left:12px" id="internet_ip">0.0.0.0</b></p>
	<p><b class="item L T T_dns" id="internet_dns">Internet DNS:</b><b style="padding-left:12px" id="internet_dns_1">0.0.0.0</b>,<b style="padding-left:12px" id="internet_dns_2">0.0.0.0</b></p>
	<p class="br"></p>
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b>
	<span id="l2tp_mtu_msg"><input type="text" class="text" id="l2tp_mtu" size="5" maxlength="4" value="1460"/> (<span class="T T_mtu1460">1460 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</span>
	<span id="pptp_mtu_msg"><input type="text" class="text" id="pptp_mtu" size="5" maxlength="4" value="1420"/> (<span class="T T_mtu1420">1420 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</span>
	</p>
	<p class="L1"><b class="item T T_connmode">Connection Mode:</b><input type="radio" name="linkMode" id="da_connAlwaysOn" checked /> <span class="T T_typeauto">Connect automatically</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="da_connOnDemand" /> <span class="T T_typedemand">Connect on demand</span></p>
	<p><b class="item">&nbsp;</b><input type="radio" name="linkMode" id="da_connManual"/> <span class="T T_typemanual">Connect manually</span></p>
	<p><b class="item">&nbsp;</b><span class="T T_midle">Max Idle Time:</span> <input type="text" class="text" id="da_idleTime" size="3" maxlength="2" value="15"/> <span class="T T_minutes">minutes</span> <span class="T T_zmean">(0 means remain active at all time)</span></p>
</div>
<p class="br"></p>

<div class="cl" id="dynipClick" onclick="DynIPClick(this)"><p class="cl"></p></div>
<div id="dyn_ip_elem_adv" class="nd">
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="dyn_mtu" size="5" maxlength="4" value="1500"/> (<span class="T T_mtu1500">1500 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="dyn_ip4_elem_adv">
		<p class="br IPv6 nd"></p>
		<p><b class="item L T T_ennat">Enable NAT</b><input type="checkbox" id="dyn_enable_nat" checked="checked" onclick="natClick('dynamic');"/>&nbsp;</p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="dyn_enable_fullnat" />&nbsp;</p>
		<p><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="dyn_ip_spi_en" />&nbsp;</p>
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="dyn_ip_igmp_en" />&nbsp;</p>
		<p><b class="item L T T_unicast">Get IP with Unicast</b><input type="checkbox" id="unicast"/> <span class="T T_noreq">(It is usually not required)</span></p>
		<p class="br"></p>
		<p><b class="item L T T_dnsmanual">Set DNS server manually</b><input type="checkbox" id="dynamic_manual_dns" onclick="doManualDns();"/>&nbsp;</p>
		<div id="dyn_ip_dns_tbl" class="nd">
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dyn_dns1" /></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dyn_dns2" /></p>
		</div>
	</div>
	<div id="dyn_ip6_elem_adv" class="nd">
		<p class="br"></p>
		<div id="dyn_ip_mld" class="nd">
			<p><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="dyn_ip_mld_en" />&nbsp;</p>
		</div>
		<p><b class="item L T T_ip6dnsmanual">Set IPv6 DNS server manually</b><input type="checkbox" id="dynamic_manual_dns6" onclick="doManualDns6();"/></p>
		<div id="dyn_ip_dns6_tbl" class="nd">
		<p><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dyn_dns6_1" /></p>
		<p><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dyn_dns6_2" /></p>
		</div>
	</div>
	<p class="br IPv6 nd"></p>
	<p><b class="item L T T_hostname" id="host_name">Host Name:</b><input type="text" class="text" size="15" id="hostname" maxlength="62"/></p>
</div>

<div class="cl nd" id="ipoeClick" onclick="IPClick(this)"><p class="cl"></p></div>
<div id="ip_elem_adv" class="nd">
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="mtu" size="5" maxlength="4" value="1500"/> (<span class="T T_mtu1500">1500 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	<div id="stc_ip4_elem_adv">
		<p class="br IPv6 nd"></p>
		<p><b class="item L T T_ennat">Enable NAT</b><input type="checkbox" id="enable_nat" checked="checked" onclick="natClick('static');"/>&nbsp;</p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="enable_fullnat" />&nbsp;</p>
		<p><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="enable_spi" />&nbsp;</p>
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="ip_igmp_en" />&nbsp;</p>
	</div>
	<div id="stc_ip6_elem_adv" class="nd">
		<p class="br"></p>
		<div id="ip_mld" class="nd">
			<p><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="ip_mld_en" />&nbsp;</p>
		</div>
	</div>
</div>

<div class="cl nd" id="pppoeClick" onclick="PPPoEClick(this)"><p class="cl"></p></div>
<div id="pppoe_elem_adv" class="nd">
	<div id="ppp_session_adv">
	<p><b class="item L T T_srvname">Service Name:</b><input type="text" class="text" size="15" id="serviceName" maxlength="31" />(<span class="T T_nochg">do not change unless necessary</span>)</p>
	<p><b class="item L T T_acname">Server Name:</b><input type="text" class="text" size="15" id="acName" maxlength="31" />(<span class="T T_nochg">do not change unless necessary</span>)</p>
	<p class="br"></p>
	<p><b class="item L">MTU(<span class="T T_bytes">bytes</span>):</b><input type="text" class="text" id="pppmtu" size="5" maxlength="4" value="1480" /> (<span class="T T_mtu1480">1480 as default</span>, <span class="T T_nochg">do not change unless necessary</span>)</p>
	
	<div id="ppp_ip4_elem_adv">
		<p class="br"></p>
		<p class="nd"><b class="item L T T_enfullcone">Enable Fullcone NAT</b><input type="checkbox" id="ppp_fullnat_en" />&nbsp;</p>
		<p><b class="item L T T_enspi">Enable SPI Firewall</b><input type="checkbox" id="ppp_spi_en" />&nbsp;</p>
		<p><b class="item L T T_enigmp">Enable IGMP Proxy</b><input type="checkbox" id="ppp_igmp_en" />&nbsp;</p>
		<p><b class="item L T T_useispaddr">Use the IP address specified by ISP</b><input type="checkbox" id="externIp_en" onclick="PPPoEShowDiv(2);"/>&nbsp;</p>
		<p id="exIp_tbl" class="nd"><b class="item L T T_ispaddr">ISP Specified IP Address:</b><input type="text" class="text" size="15" value="0.0.0.0" id="externIpAddr" /></p>
	    <p><b class="item L T T_echo">Echo request interval:</b><input type="text" class="text" size="5" id="ppp_echotime" maxlength="3" value="30" /> <span class="T T_echoinfo">(0~120 seconds, 0 means no request)</span></p>
		<p><b class="item L T T_dnsmanual">Set DNS server manually</b><input type="checkbox" id="dns_en" onclick="PPPoEShowDiv(3);"/>&nbsp;</p>
		<div id="dns_tbl" class="nd">
		<p><b class="item L T T_dns">DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dns1" /></p>
		<p><b class="item L T T_secdns">Secondary DNS Server:</b><input type="text" class="text" size="15" value="0.0.0.0" id="dns2" /></p>
		</div>
	</div>
	</div>
	<div id="ppp_ip6_elem_adv" class="nd">
		<p class="br"></p>
		<div id="ppp_mld" class="nd">
			<p><b class="item L T T_enmld">Enable MLD Proxy</b><input type="checkbox" id="ppp_mld_en" />&nbsp;</p>
		</div>
		<p><b class="item L T T_ip6useispaddr">Use IPv6 address specified by ISP</b><input type="checkbox" id="externIp6_en" onclick="ShowDiv(this);"/></p>
		<div id="exIp6_tbl" class="nd">
			<p><b class="item L T T_ip6ispaddr">ISP specified IPv6 Address:</b><input type="text" class="text" size="15" value="::" id="externIp6Addr" /></p>
			<p><b class="item L T T_ip6ispgw">ISP specified IPv6 Gateway:</b><input type="text" class="text" size="15" value="::" id="externIp6Gateway" /></p>
		</div>
		<p><b class="item L T T_ip6dnsmanual">Set IPv6 DNS server manually</b><input type="checkbox" id="dns6_en" onclick="ShowDiv(this);"/></p>
		<div id="dns6_tbl" class="nd">
			<p><b class="item L T T_ip6dns">IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dns6_1" /></p>
			<p><b class="item L T T_ip6secdns">Secondary IPv6 DNS Server:</b><input type="text" class="text" size="15" value="::" id="dns6_2" /></p>
		</div>
	</div>
</div>

</div>
<p class="bl"></p>
<p class="tail" id="tail">
<input type="button" id="saveBtn" class="button L T T_save" value="Save" onclick="doSave(0);" />
</p>
</div>
<script language="javascript" type="text/javascript">var wan_iplist_sta={};var wan_iplist_dyn={};var wan_pppoelist={};var wan_l2tp_list={};var wan_pptp_list={};var wan_iplistarg_sta={};var wan_iplistarg_dyn={};var wan_pppoelistarg={};var wan_l2tp_listarg={};var wan_pptp_listarg={};var l3Forwarding;var dft_gtw;var ipConnList;var pppConnList;var l2tpConnList;var pptpConnList;var l3ForwardingObj={};var staticStk;var staticEnable;var dynStk;var dynEnable;var PPPoEStk;var PPPoEEnable;var l2tpStk;var l2tpEnable;var pptpStk;var pptpEnable;var pStk;var loadType;var wan_pppoev4list={};var PPPoEv4Stk;var PPPoEv4Enable;var PPPoEv4v6Enable;var wan_pppoev6list={};var PPPoEv6Stk;var PPPoEv6Enable;var PPPoESetConnection;var IPv6CfgStk;var ip4Enable;var ip6Enable;var l3Ip6ForwardingObj={};var wanIPv4List;var wanPPPv4List;var wan6to4Enable;var wan6to4Stk;var wan6MainTunnel;var wan6MainTunnelAttrs={};var wan4ConnName;var PDEnable=0;var lan6HostStk;var wanL2tpConList;var wanPptpConList;init();</script>
