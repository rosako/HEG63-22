
<script type="text/javascript">function Base64(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=_utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else{if(isNaN(chr3)){enc4=64}}output=output+_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4)}return output};this.decode=function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=_keyStr.indexOf(input.charAt(i++));enc2=_keyStr.indexOf(input.charAt(i++));enc3=_keyStr.indexOf(input.charAt(i++));enc4=_keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}}output=_utf8_decode(output);return output};_utf8_encode=function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else{if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}}}return utftext};_utf8_decode=function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else{if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3}}}return string}};</script>
<script type="text/javascript">var username="";var email="";var phoneNum="";var country="";var isp="";var content="";var config="";var config_name="";var syslog="";var log_name="";var deviceHarder="";var deviceMac="";var deviceSoftver="";var model="";var regionInfo=new Array("Albania",1,13,2,"Algeria",1,13,2,"Argentina",1,13,2,"Armenia",1,13,2,"Australia",1,13,2,"Austria",1,13,2,"Azerbaijan",1,13,2,"Bahrain",1,13,2,"Belarus",1,13,2,"Belgium",1,13,2,"Belize",1,13,2,"Bolivia",1,13,2,"Brazil",1,13,2,"Brunei Darussalam",1,13,2,"Bulgaria",1,13,2,"Canada",1,11,2,"Chile",1,13,2,"China",1,13,1,"Colombia",1,11,2,"Costa Rica",1,13,2,"Croatia",1,13,2,"Cyprus",1,13,2,"Czech Republic",1,13,2,"Denmark",1,13,2,"Dominican Republic",1,11,2,"Ecuador",1,13,2,"Egypt",1,13,2,"El Salvador",1,13,2,"Estonia",1,13,2,"Finland",1,13,2,"France",1,13,2,"Georgia",1,13,2,"Germany",1,13,2,"Greece",1,13,2,"Guatemala",1,11,2,"Honduras",1,13,2,"Hong Kong",1,13,2,"Hungary",1,13,2,"Iceland",1,13,2,"India",1,13,2,"Indonesia",1,13,2,"Iran",1,13,2,"Ireland",1,13,2,"Israel",1,13,2,"Italy",1,13,2,"Japan",1,13,2,"Jordan",1,13,2,"Kazakhstan",1,13,2,"North Korea",1,13,2,"Korea Republic",1,13,2,"Kuwait",1,13,2,"Latvia",1,13,2,"Lebanon",1,13,2,"Liechtenstein",1,13,2,"Lithuania",1,13,2,"Luxembourg",1,13,2,"Macau",1,13,2,"Macedonia",1,13,2,"Malaysia",1,13,2,"Malta",1,13,2,"Mexico",1,11,2,"Monaco",1,13,2,"Morocco",1,13,2,"Netherlands",1,13,2,"New Zealand",1,13,2,"Norway",1,13,2,"Oman",1,13,2,"Pakistan",1,13,2,"Panama",1,11,2,"Peru",1,13,2,"Philippines",1,13,2,"Poland",1,13,2,"Portugal",1,13,2,"Puerto Rico",1,11,2,"Qatar",1,13,2,"Romania",1,13,2,"Russia",1,13,2,"Saudi Arabia",1,13,2,"Singapore",1,13,2,"Serbia",1,13,2,"Slovak Republic",1,13,2,"Slovenia",1,13,2,"South Africa",1,13,2,"Spain",1,13,2,"Sweden",1,13,2,"Switzerland",1,13,2,"Syrian Arab Republic",1,13,2,"Taiwan",1,11,2,"Thailand",1,13,2,"Trinidad And Tobago",1,13,2,"Tunisia",1,13,2,"Turkey",1,13,2,"Ukraine",1,13,2,"United Arab Emirates",1,13,2,"United Kingdom",1,13,2,"United States",1,11,2,"Uruguay",1,13,2,"Uzbekistan",1,11,2,"Venezuela",1,11,2,"Viet Nam",1,13,2,"Yemen",1,13,2,"Zimbabwe",1,13,2);var regionCodeInfo=new Array([8,"AL ",0,3,"ALBANIA"],[12,"DZ ",0,3,"ALGERIA"],[32,"AR ",0,3,"ARGENTINA"],[51,"AM ",0,3,"ARMENIA"],[36,"AU ",0,3,"AUSTRALIA"],[40,"AT ",0,3,"AUSTRIA"],[31,"AZ ",0,3,"AZERBAIJAN"],[48,"BH ",0,3,"BAHRAIN"],[112,"BY ",0,3,"BELARUS"],[56,"BE ",0,3,"BELGIUM"],[84,"BZ ",0,8,"BELIZE"],[68,"BO ",0,8,"BOLIVIA"],[76,"BR ",0,3,"BRAZIL"],[96,"BN ",0,3,"BRUNEI DARUSSALAM"],[100,"BG ",0,3,"BULGARIA"],[124,"CA ",0,1,"CANADA"],[152,"CL ",0,3,"CHILE"],[156,"CN ",0,3,"CHINA"],[170,"CO ",0,1,"COLOMBIA"],[188,"CR ",0,3,"COSTA RICA"],[191,"HR ",0,3,"CROATIA"],[196,"CY ",0,3,"CYPRUS"],[203,"CZ ",0,3,"CZECH REPUBLIC"],[208,"DK ",0,3,"DENMARK"],[214,"DO ",0,1,"DOMINICAN REPUBLIC"],[218,"EC ",0,3,"ECUADOR"],[818,"EG ",0,3,"EGYPT"],[222,"SV ",0,3,"EL SALVADOR"],[233,"EE ",0,3,"ESTONIA"],[246,"FI ",0,3,"FINLAND"],[250,"FR ",0,3,"FRANCE"],[268,"GE ",0,3,"GEORGIA"],[276,"DE ",0,3,"GERMANY"],[300,"GR ",0,3,"GREECE"],[320,"GT ",0,1,"GUATEMALA"],[340,"HN ",0,3,"HONDURAS"],[344,"HK ",0,3,"HONG KONG"],[348,"HU ",0,3,"HUNGARY"],[352,"IS ",0,3,"ICELAND"],[356,"IN ",0,3,"INDIA"],[360,"ID ",0,3,"INDONESIA"],[364,"IR ",0,3,"IRAN"],[372,"IE ",0,3,"IRELAND"],[376,"IL ",0,7,"ISRAEL"],[380,"IT ",0,3,"ITALY"],[392,"JP ",3,6,"JAPAN"],[400,"JO ",0,3,"JORDAN"],[398,"KZ ",0,3,"KAZAKHSTAN"],[410,"KP ",2,3,"NORTH KOREA"],[408,"KR ",2,3,"KOREA REPUBLIC"],[414,"KW ",0,3,"KUWAIT"],[428,"LV ",0,3,"LATVIA"],[422,"LB ",0,3,"LEBANON"],[438,"LI ",0,3,"LIECHTENSTEIN"],[440,"LT ",0,3,"LITHUANIA"],[442,"LU ",0,3,"LUXEMBOURG"],[446,"MO ",0,3,"MACAU"],[807,"MK ",0,3,"MACEDONIA"],[458,"MY ",0,3,"MALAYSIA"],[470,"MT",0,3,"MALTA",],[484,"MX ",0,1,"MEXICO"],[492,"MC ",0,3,"MONACO"],[504,"MA ",0,3,"MOROCCO"],[528,"NL ",0,3,"NETHERLANDS"],[554,"NZ ",0,8,"NEW ZEALAND"],[578,"NO ",0,3,"NORWAY"],[512,"OM ",0,3,"OMAN"],[586,"PK ",0,3,"PAKISTAN"],[591,"PA ",0,1,"PANAMA"],[604,"PE ",0,3,"PERU"],[608,"PH ",0,3,"PHILIPPINES"],[616,"PL ",0,3,"POLAND"],[620,"PT ",0,3,"PORTUGAL"],[630,"PR ",0,1,"PUERTO RICO"],[634,"QA ",0,3,"QATAR"],[642,"RO ",0,3,"ROMANIA"],[643,"RU ",0,3,"RUSSIA"],[682,"SA ",0,3,"SAUDI ARABIA"],[702,"SG ",4,3,"SINGAPORE"],[688,"RS ",0,3,"SERBIA"],[703,"SK ",0,3,"SLOVAK REPUBLIC"],[705,"SI ",0,3,"SLOVENIA"],[710,"ZA ",0,3,"SOUTH AFRICA"],[724,"ES ",0,3,"SPAIN"],[752,"SE ",0,3,"SWEDEN"],[756,"CH ",0,3,"SWITZERLAND"],[760,"SY ",0,3,"SYRIAN ARAB REPUBLIC"],[158,"TW ",1,1,"TAIWAN"],[764,"TH ",0,3,"THAILAND"],[780,"TT ",0,3,"TRINIDAD AND TOBAGO"],[788,"TN ",0,3,"TUNISIA"],[792,"TR ",0,3,"TURKEY"],[804,"UA ",0,3,"UKRAINE"],[784,"AE ",0,3,"UNITED ARAB EMIRATES"],[826,"GB ",0,3,"UNITED KINGDOM"],[840,"US ",0,1,"UNITED STATES"],[858,"UY ",0,3,"URUGUAY"],[860,"UZ ",0,1,"UZBEKISTAN"],[862,"VE ",0,8,"VENEZUELA"],[704,"VN ",0,3,"VIET NAM"],[887,"YE ",0,3,"YEMEN"],[716,"ZW ",0,3,"ZIMBABWE"]);</script>

<script type="text/javascript">function validateInput(){return validateEmail()&&validateContent()&&validatePhone()}function validateEmail(){$.id("t_require0").className="note hidden";$.id("t_require2").className="note hidden";$.id("email").className="";if($.id("email").value.length==0){$.id("t_require0").className="note";$.id("email").className="note";return false}else{if(!$.id("email").value.match(/^[a-zA-Z0-9\.\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*$/)){$.id("t_require2").className="note";$.id("email").className="note";return false}else{$.id("t_require0").className="note hidden";$.id("t_require2").className="note hidden";$.id("email").className="";return true}}}function validateContent(){if($.id("content").value.length==0){$.id("t_require1").className="note";$.id("content").className="note";return false}else{$.id("t_require1").className="note hidden";$.id("content").className="";return true}}function validatePhone(){$.id("t_require3").className="note hidden";$.id("phone").className="";if($.id("phone").value.length==0){return true}else{if(!$.id("phone").value.match(/^\+?[0-9][0-9\-\x20]*[0-9]$/)){$.id("t_require3").className="note";$.id("phone").className="note";return false}else{return true}}}function initRegionList(){var region=$.id("region");var selectedIndex=0;for(i=0;i<(regionInfo.length/4);i++){var opt=$.c("option");opt.value=regionCodeInfo[i][1];if(country_str&&country_str[i]){opt.text=country_str[i]}else{opt.text=regionInfo[4*i]}try{region.add(opt,null)}catch(e){region.add(opt)}}region.selectedIndex=selectedIndex}function init(){initRegionList();var deviceInfo=$.act(ACT_GET,IGD_DEV_INFO,null,null,["softwareVersion","hardwareVersion","modelName"]);if(!$.exe()){deviceSoftver=deviceInfo.softwareVersion;deviceHarder=deviceInfo.hardwareVersion;model=deviceInfo.modelName;var lanIpCfg=$.act(ACT_GL,LAN_IP_INTF,null,null,["X_TP_MACAddress"]);if(!$.exe()){deviceMac=lanIpCfg[0].X_TP_MACAddress;var dateStr=new Date().toLocaleDateString().split("/").join("-");config=$.io("/cgi/confencode",false);config_name=model+"-"+dateStr+".bin";var logs;if($.local||$.sim){logs=$.io("./xml/log.txt",false).split("\r\n")}else{logs=$.io("/cgi/log",false).split("\r\n")}logs.shift();logs=logs.join("\r\n");syslog=new Base64().encode(logs);log_name="syslog"+dateStr}}}function createCORSRequest(method,url){var xhr=new XMLHttpRequest();if("withCredentials" in xhr){xhr.open(method,url,true)}else{if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();xhr.open(method,url)}else{xhr=null}}return xhr}function doSave(){if(validateInput()){var params={username:$.id("name").value,email:$.id("email").value,phoneNum:$.id("phone").value,country:$.id("region").value,isp:$.id("isp").value,content:$.id("content").value.replace(/\n/g,"\r\n"),config:$.id("config").checked?config:undefined,config_name:$.id("config").checked?config_name:undefined,syslog:$.id("syslog").checked?syslog:undefined,log_name:$.id("syslog").checked?log_name:undefined,deviceHarder:deviceHarder,deviceMac:deviceMac,deviceSoftver:deviceSoftver,model:model};var url="http://www.tp-link.com/phppage/router_sendMessage.php";var xhr=createCORSRequest("post",url);if(!xhr){throw new Error("CORS not supported")}xhr.onload=function(){var type=xhr.getResponseHeader("Content-Type");if(type==="application/json"){var responseText=JSON.parse(xhr.responseText);if(responseText.success){$.reload()}else{$.reload()}}setTimeout(function(){},2000)};xhr.onerror=function(){$.alert(ERR_FEEDBACK)};xhr.send(JSON.stringify(params))}}function troggle(e){var target=e.target||e.srcElement;if(target.id=="blue-style"){if($.id("statement_ul").className=="hidden"){$.id("statement_ul").className=""}else{$.id("statement_ul").className="hidden"}}};</script>

<p class="et T" id="et">Feedback</p>
<div class="con1 XL" id="feedbackControlContainer">
<p class="bl"></p>

<p class="L2">
    <b class="fl M T" id="t_name">Name:</b>
	<input type="text" class="text" size="22"  maxlength="32" id="name"/>
	<span class="T T_optional">(optional)</span>
</p>
<p class="L2">
    <b class="fl M T" id="t_email">Email:</b>
	<input type="text" class="text" size="22"  maxlength="32" id="email" onchange="validateEmail()"/>
	<span class="note hidden" id="t_require0"></span>
	<span class="note hidden" id="t_require2"></span>
</p>
<p class="L2">
    <b class="fl M T" id="t_phone">Phone:</b>
	<input type="text" class="text" size="22"  maxlength="32" id="phone" onchange="validatePhone()"/>
	<span class="T T_optional">(optional)</span>
	<span class="note hidden" id="t_require3"></span>
</p>
<p class="L2">
    <b class="fl M T" id="t_country">Country:</b>
	<select id="region" name="region">
	</select>
</p>
<p class="L2">
    <b class="fl M T" id="t_isp">ISP:</b>
	<input type="text" class="text" size="22"  maxlength="32" id="isp"/>
	<span class="T T_optional">(optional)</span>
</p>
<p class="L2">
	<b class="fl M T" id="t_attachment">Attachment:</b>
	<input id="config" type="checkbox"/> <span class="T" id="t_configFile">Configuration File</span>
	<input id="syslog" type="checkbox"/> <span class="T" id="t_systemLog">System Log</span>
</p>
<p class="L2">
    <b class="M T" id="t_suggestion">Suggestion, option and questions:</b>
	<textarea id="content" rows="6" cols="28" maxlength="2023" style="display:block;margin-left:15%;" onchange="validateContent()"></textarea>
	<span class="note hidden" id="t_require1"></span>
</p>

<p class="L2">
	<p id="t_statement_head" onclick="troggle(event)"></p>
	<ul id="statement_ul" class="hidden">
		<li id="t_statement1"></li>
		<li id="t_statement2"></li>
		<li id="t_statement3"></li>
	</ul>
</p>
<p class="bl"></p>
<p class="tail">
<input id="sendBtn" class="button L T" value="Send" type="button" onclick="$.addLoading(this, 200, function(){doSave();});" />
</p>
</div>
<script type="text/javascript">$.loadHelpFrame("FeedbackHelp.htm");init();</script>
