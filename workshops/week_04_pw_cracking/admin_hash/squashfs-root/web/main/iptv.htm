<script language="javascript" type="text/javascript">var iptvISP=new Array(["Eircom",1,35],["BT Business",2,35],["BT Education",3,35],["Vodafone Ireland",4,35],["Digiweb",8,35],["Irish Broadband",8,35],["Magnet",8,35],["UTV ROI",8,35]);$.iptv={};var iptvWl={};var ssidList={};var basicList=$.act(ACT_GL,LAN_WLAN,null,null,["name","Standard","SSID","RegulatoryDomain","PossibleChannels","RegulatoryDomain","AutoChannelEnable","Channel","X_TP_Bandwidth","Enable","SSIDAdvertisementEnabled","BeaconType","BasicEncryptionModes","WPAEncryptionModes","IEEE11iEncryptionModes","X_TP_Configuration_Modified","WMMEnable","X_TP_FragmentThreshold"]);var wlanObj;var guestObj;function init(){addPorts();if($.mainParam){$.removeClass($.id("t_title_itv"),"nd");$.loadHelp();if(INCLUDE_WAN_MODE){sysMode=$.act(ACT_GET,SYS_MODE,null,null,["mode"]);$.exe()}else{sysMode={mode:"DSL"}}$.removeClass($.id("tail"),"ctr");$.removeClass($.id("b_save"),"nd");$.id("iptven").checked=$.mainParam.en;$.id("vpi").value=$.mainParam.vpi;$.id("vci").value=$.mainParam.vci;doSync();if($.mainParam.lan==1){$.id("lan"+$.mainParam.port).checked=true}else{if(INCLUDE_LAN_WLAN_MSSID){$.id(ssidList[$.mainParam.port].name).checked=true}}}else{$.removeClass($.id("t_title_itv"),"nd");$.loadHelp();if(INCLUDE_WAN_MODE){sysMode=$.act(ACT_GET,SYS_MODE,null,null,["mode"]);$.exe()}else{sysMode={mode:"DSL"}}var tmp={};if(doGet(tmp)){return}doFill(tmp);$.removeClass($.id("tail"),"ctr");$.removeClass($.id("b_save"),"nd")}if(sysMode.mode=="DSL"){$.addClass($.id("t_eth_tip"),"nd");$.removeClass($.id("t_dsl_tip"),"nd");$.removeClass($.id("div_pvc"),"nd");$.addClass($.id("div_vlanTag"),"nd")}if(INCLUDE_LAN_WLAN_MSSID){$.removeClass($.id("b_wlCon"),"nd")}}function initISP(){var isp=$.id("isp");var lastestISP=0;if($.iptv.isp==undefined){var iptvList=$.act(ACT_GET,IPTV,null,null,["X_TP_IPTVISP"]);$.exe();lastestISP=iptvList.X_TP_IPTVISP;var lastISP;for(var index=0;iptvISP[index];index++){if(lastISP!=iptvISP[index][0]){lastISP=iptvISP[index][0];var opt1=$.c("option");opt1.value=iptvISP[index][0];opt1.text=iptvISP[index][0];try{isp.add(opt1,null)}catch(e){isp.add(opt1)}}}var opt2=$.c("option");opt2.value="Other";opt2.text="Other";try{isp.add(opt2,null)}catch(e){isp.add(opt2)}isp.selectedIndex=lastestISP;doISPChange()}else{var lastISP;for(var index=0;iptvISP[index];index++){if(lastISP!=iptvISP[index][0]){lastISP=iptvISP[index][0];var opt1=$.c("option");opt1.value=iptvISP[index][0];opt1.text=iptvISP[index][0];try{isp.add(opt1,null)}catch(e){isp.add(opt1)}}}var opt2=$.c("option");opt2.value="Other";opt2.text="Other";try{isp.add(opt2,null)}catch(e){isp.add(opt2)}isp.selectedIndex=$.iptv.isp.ispIndex;doISPchange()}}function doISPChange(){var selectedISP=$.id("isp");var i=0;selectedISP.value="Other";if("Other"==selectedISP.value){}else{for(i=0;iptvISP[i][0];++i){if(iptvISP[i][0]==selectedISP.value){break}}$.id("vpi").disabled=true;$.id("vci").disabled=true;$.id("vpi").value=iptvISP[i][1];$.id("vci").value=iptvISP[i][2]}}function reboot(){$.loadMain("restart.htm")}function addPorts(){var con=$.id("portCon");if($.ports==1){$.append(con,"<input type='radio' name = 'iptvPort' id='lan1'/><span id='span_lan1'>LAN</span>")}else{if($.ports==2){$.append(con,"<input type='radio' name = 'iptvPort' id='lan1'/><span id='span_lan1'>LAN1</span>");$.append(con,"<input type='radio' name = 'iptvPort' id='lan2'/><span id='span_lan2'>LAN2</span>")}else{for(var i=1;i<=$.ports;i++){$.append(con,"<input type='radio' name = 'iptvPort' id='lan"+i+"'"+(i>1?" class='ml'":"")+" /><span id='span_lan"+i+"'>LAN"+i+"</span>")}}}if(!$.exe()){wlanObj=basicList[0]}if((INCLUDE_LAN_WLAN)&&(INCLUDE_LAN_WLAN_MSSID)){var wlcon=$.id("wlPortCon");$.removeClass($.id("t_iptv_tip2"),"nd");if(INCLUDE_LAN_WLAN_GUESTNETWORK){guestObj=$.act(ACT_GET,LAN_WLAN_GUESTNET,wlanObj.__stack,null,["name"])}ssidList=$.act(ACT_GL,LAN_WLAN_MSSIDENTRY,null,null,["SSID","name","enable","status"]);if(!$.exe()){for(var i=0;i<ssidList.length;i++){if(ssidList[i].name==guestObj.name){continue}else{$.append(wlcon,"<input type='radio' name = 'iptvPort' id='"+ssidList[i].name+"' /><span>"+ssidList[i].SSID+"</span>")}}}}}function doGet(obj){var iptvobj;if(sysMode.mode=="DSL"){iptvobj=$.act(ACT_GET,DSL_IPTV_CFG)}else{iptvobj=$.act(ACT_GET,ETH_IPTV_CFG)}var ret=$.exe();if($.local){iptvobj={enable:1,iptvLanPort:0,iptvVPI:0,iptvVCI:35}}if(!ret){obj.en=iptvobj.enable==1?true:false;obj.port=parseInt(iptvobj.iptvLanPort,10);if(sysMode.mode=="DSL"){if(iptvobj.iptvVCI==0){obj.vpi="";obj.vci=""}else{obj.vpi=iptvobj.iptvVPI;obj.vci=iptvobj.iptvVCI}}else{obj.enableVlanTag=iptvobj.enableVlanTag;obj.vlanTag=iptvobj.vlanTag}}return ret}function doSync(){var turn=function(bool){$.id("isp").disabled=bool;$.id("b_wlCon").disabled=bool;$.id("vpi").disabled=bool;$.id("vci").disabled=bool;$.id("enable_vlan_tag").disabled=bool;$.id("vlan_tag").disabled=bool;for(var i=1;i<=$.ports;i++){$.id("lan"+i).disabled=bool}if(INCLUDE_LAN_WLAN&&INCLUDE_LAN_WLAN_MSSID&&bool){for(var i=0;i<ssidList.length;i++){if(guestObj.name!=ssidList[i].name){$.id(ssidList[i].name).disabled=bool}}}if(INCLUDE_LAN_WLAN&&INCLUDE_LAN_WLAN_MSSID&&!bool){for(var i=0;i<ssidList.length;i++){if(guestObj.name!=ssidList[i].name){$.id(ssidList[i].name).disabled=ssidList[i].status=="Up"?false:true}}}};if($.id("iptven").checked){turn(false)}else{turn(true)}}function doFill(obj){$.id("iptven").checked=obj.en;doSync();for(var i=1;i<=$.ports;i++){if(obj.port%2==1){$.id("lan"+i).checked=true}else{$.id("lan"+i).checked=false}obj.port=obj.port>>1}for(var i=$.ports+1;i<=8;i++){obj.port=obj.port>>1}for(var i=0;i<8;i++){if(obj.port%2==1){$.id("wlan"+i).checked=true}obj.port=obj.port>>1}if(sysMode.mode=="DSL"){$.id("vpi").value=obj.vpi;$.id("vci").value=obj.vci}else{(obj.enableVlanTag==1)?($.id("enable_vlan_tag").checked=1):($.id("enable_vlan_tag").checked=0);$.id("vlan_tag").value=obj.vlanTag}}function doCollect(obj){obj.port=0;obj.en=$.id("iptven").checked?1:0;for(var i=1;i<=$.ports;i++){if($.id("lan"+i).checked){obj.port+=Math.pow(2,i-1)}}for(var i=0;i<ssidList.length;i++){if((guestObj.name!=ssidList[i].name)&&($.id(ssidList[i].name).checked)&&(!$.id(ssidList[i].name).disabled)){var tmpID=parseInt(ssidList[i].name.split("wlan")[1],10)+8;obj.port+=Math.pow(2,tmpID)}}if(sysMode.mode=="DSL"){obj.vpi=$.id("vpi").value;obj.vci=$.id("vci").value}else{obj.enableVlanTag=$.id("enable_vlan_tag").checked?1:0;obj.vlanTag=$.id("vlan_tag").value}if(!$.iptv.isp){$.iptv.isp={}}$.iptv.isp.ispIndex=$.id("isp").selectedIndex}function doCheck(obj){if(obj.en){if(sysMode.mode=="DSL"){if($.num(obj.vpi,[0,255],true)){$.alert(ERR_WAN_VPI_VCI_INVAD);return false}if($.num(obj.vci,[1,65535],true)){$.alert(ERR_WAN_VPI_VCI_INVAD);return false}}else{if($.num(obj.vlanTag,[1,4094],true)){$.alert(ERR_IPTV_VLAN_TAG_INVAD);return false}}if(obj.port==0){$.alert(ERR_IPTV_LANPORT_EMPTY);return false}}return true}function goNext(){doCollect($.qd.iptv);if(doCheck($.qd.iptv)===false){return}$.qf.next()}function goPrev(){doCollect($.qd.iptv);$.qf.prev()}function doSave(obj){var tmp={};doCollect(tmp);if(doCheck(tmp)===false){return}var arg={};arg.enable=tmp.en?1:0;if(tmp.en){arg.iptvLanPort=tmp.port;if(sysMode.mode=="DSL"){arg.iptvVPI=tmp.vpi;arg.iptvVCI=tmp.vci}else{arg.enableVlanTag=tmp.enableVlanTag;arg.vlanTag=tmp.vlanTag}}$.addLoading(obj);if(sysMode.mode=="DSL"){$.act(ACT_SET,DSL_IPTV_CFG,null,null,arg)}$.act(ACT_SET,IPTV,null,null,{X_TP_IPTVISP:$.iptv.isp.ispIndex});$.exe(function(ret){if(!ret){$.reload()}})}function doWl(){iptvWl.iptv=1;iptvWl.en=1;iptvWl.lan=0;iptvWl.vpi=$.id("vpi").value;iptvWl.vci=$.id("vci").value;for(var i=1;i<=$.ports;i++){if($.id("lan"+i).checked){iptvWl.port=i;iptvWl.lan=1}}for(var i=0;i<ssidList.length;i++){if((guestObj.name!=ssidList[i].name)&&($.id(ssidList[i].name).checked)){iptvWl.port=i}}$.loadMain("wlBasic.htm",iptvWl)};</script>

<div class="con1 M">
<p class="et"><span class="T nd" id="t_title_itv">IPTV Settings</span><span class="T nd" id="t_title_qs">Quick Setup - IPTV</span></p>
<p class="bl"></p>
<div class="con2">
<p class="T" id="t_dsl_tip">IPTV parameters can be set on this page.If you want to set the WLAN port for IPTV connection, please enable wireless function.</p>
<p class="T" id="t_eth_tip" class="nd">IPTV parameters can be set on this page.If you want to set the WLAN port for IPTV connection, please enable wireless function.</p>
<p class="br"></p>
<p><input type="checkbox" id="iptven" onclick="doSync()" checked /><span class="T" id="t_iptv_tip_enable">Enable IPTV</span></p>
<p class="nd" id="t_full_warn">Warning: If the connections are full, please enter "Network->WAN" to delete one connection</p>
<p class="br"></p>
<p class="L2 T" id="t_iptv_tip1">Please select the LAN port for IPTV connection and connect the set-top box (STB) to that port.</p>
<p class="L2" id="portCon"></p>
<p class="br"></p>
<p class="L2"><input type="button" class="button XXL nd T T_enWlsIptv" value="Enable a wireless connection for IPTV" id="b_wlCon" onclick="doWl()" /></p>
<p class="L2 T nd" id="t_iptv_tip2">Note: When the WLAN port is set for IPTV connection, the wireless function is only available for IPTV connection.</p>
<p class="L2" id="wlPortCon"></p>
<p class="br"></p>
<div id="div_pvc">
<p class="L2 T" id="t_iptv_tip3">Please set PVC parameters for IPTV connection.</p>
<p class="L2 nd"><b class="T item S" id="t_iptv_isp">ISP：</b><select id="isp" name="isp" onchange="doISPChange();"></select></p>
<p class="L2"><b class="T item S" id="t_iptv_vpi">VPI：</b><input type="text" class="text" id="vpi" size="5" maxlength="3" />(0-255)</p>
<p class="L2"><b class="T item S" id="t_iptv_vci">VCI：</b><input type="text" class="text" id="vci" size="5" maxlength="5" />(1-65535)</p>
</div>
<div id="div_vlanTag">
<p class="br"></p>
<p class="L2"><input type="checkbox" class="T" id="enable_vlan_tag"/><b id="t_iptv_vlanTag">Vlan Tag</b></p>
<p class="L2"><b class="T item S" id="t_iptv_vlanValue">Tag Value:</b><input type="text" class="text" size="4" value="0" id="vlan_tag"/>（1～4094）</p>
</div>
</div>
<p class="bl"></p>
<p class="tail ctr" id="tail">
<input type="button" class="button L nd" value="Previous" id="b_prev" onclick="goPrev()" />
<input type="button" class="button L nd" value="Next" id="b_next" onclick="goNext()" />
<input type="button" class="button L nd" value="Save" id="b_save" onclick="doSave(this)" />
</p>
</div>
<script language="javascript" type="text/javascript">var sysMode;init();</script>