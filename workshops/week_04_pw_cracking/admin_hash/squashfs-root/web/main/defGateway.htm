<script language="javascript" type="text/javascript">function init(){var index=0;var aliasName=$.act(ACT_GET,L3_FORWARDING,null,null,["__ifAliasName"]);filterlist=$.act(ACT_GL,L2_BRIDGING_FILTER,null,null,["filterKey","X_TP_IfAliasName","__filterBridgeRefName"]);if(INCLUDE_IPV6){var wanIpList=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","name","connectionType","X_TP_IPv4Enabled"]);var wanPPPList=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","name","X_TP_IPv4Enabled"]);if(INCLUDE_L2TP){var wanL2TPList=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","name"])}if(INCLUDE_PPTP){var wanPPTPList=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","name"])}}else{var wanIpList=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","name","connectionType"]);var wanPPPList=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","name"]);if(INCLUDE_L2TP){var wanL2TPList=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","name"])}if(INCLUDE_PPTP){var wanPPTPList=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","name"])}}var sel=$.id("wanInf");if(!$.exe()){if(INCLUDE_USB_3G_DONGLE&&INCLUDE_WAN_MODE){if(aliasName.__ifAliasName.match("USB_3G")!=null){var pStk;var wanUsb3g;var wanTypes=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]);var usb3gList=$.act(ACT_GL,WAN_USB_3G_LINK_CFG,null,null,["backupEnable"]);var sysMode=$.act(ACT_GET,SYS_MODE,null,null,["mode"]);if(!$.exe()){$.each(wanTypes,function(){if(this.WANAccessType=="USB_3G"){pStk=this.__stack}});$.each(usb3gList,function(){var tmpStk=$.stkPop(this.__stack,1);if(pStk==tmpStk){wanUsb3g=$.act(ACT_GET,WAN_USB_3G_LINK_CFG,this.__stack,null,["mainConnObjName"])}});if(!$.exe()){if(sysMode.mode!="USB_3G"){aliasName.__ifAliasName=wanUsb3g.mainConnObjName}}}}}for(var i=0;i<wanIpList.length;i++){if((wanIpList[i].connectionType!="IP_Bridged")&&(wanIpList[i].enable==1)&&(!INCLUDE_IPV6||wanIpList[i].X_TP_IPv4Enabled==1)&&(checkGroup(wanIpList[i].name))){var option=$.c("option");option.value=wanIpList[i].__stack;option.text=wanIpList[i].name;try{sel.add(option,null)}catch(e){sel.add(option)}index++;if(wanIpList[i].name==aliasName.__ifAliasName){sel.selectedIndex=index-1}}}for(var j=0;j<wanPPPList.length;j++){var option=$.c("option");if(wanPPPList[j].enable==1&&(wanPPPList[j].name.match("USB_3G")==null)&&(!INCLUDE_IPV6||wanPPPList[j].X_TP_IPv4Enabled==1)&&(checkGroup(wanPPPList[j].name))){option.value=wanPPPList[j].__stack;option.text=wanPPPList[j].name;try{sel.add(option,null)}catch(e){sel.add(option)}index++;if(wanPPPList[j].name==aliasName.__ifAliasName){sel.selectedIndex=index-1}}}if(INCLUDE_L2TP){for(var i=0;i<wanL2TPList.length;i++){if(wanL2TPList[i].enable==1){var option=$.c("option");option.value=wanL2TPList[i].__stack;option.text=wanL2TPList[i].name;try{sel.add(option,null)}catch(e){sel.add(option)}index++;if(wanL2TPList[i].name==aliasName.__ifAliasName){sel.selectedIndex=index-1}}}}if(INCLUDE_PPTP){for(var i=0;i<wanPPTPList.length;i++){if(wanPPTPList[i].enable==1){var option=$.c("option");option.value=wanPPTPList[i].__stack;option.text=wanPPTPList[i].name;try{sel.add(option,null)}catch(e){sel.add(option)}index++;if(wanPPTPList[i].name==aliasName.__ifAliasName){sel.selectedIndex=index-1}}}}if(index==0){var option=$.c("option");option.value=0;option.text="No available interface.";try{sel.add(option,null)}catch(e){sel.add(option)}$.removeClass($.id("tip"),"nd")}}if(INCLUDE_ROUTE_BINDING){$.removeClass($.id("t_info2"),"nd")}}function doSubmit(){$.addLoading($.id("submitBtn"));$.act(ACT_SET,L3_FORWARDING,null,null,["__ifAliasName="+$.id("wanInf").options[$.id("wanInf").selectedIndex].text,"__ifName=","defaultConnectionService="]);$.exe(function(ret){if(!ret){$.reload()}})}function checkGroup(wanName){if(INCLUDE_ROUTE_BINDING){var index=0;for(index=0;index<filterlist.length;index++){if((filterlist[index].X_TP_IfAliasName==wanName)&&(filterlist[index].__filterBridgeRefName!="Default")){return false}}}return true};</script>

<p class="et T" id="et">Default Gateway Settings</p>

<div class="con1 L">
<p class="ct"></p>
<p class="bl"></p>
<div class="con2">
<p class="T" id="t_info1">Note1:Select a preferred WAN interface as the system default gateway.</p>
<p class="T nd" id="t_info2">Note2:The WAN that in other group can not be seleted as system default gateway.</p>
<p class="br"></p>
<p class="L1"><b class="item T" id="t_selwan">Select WAN Interface:</b>
<select class="XL" id="wanInf" ></select>
<input id="tip" type="button" class="button nd L" value="Add Interface" onclick="$.loadMain('wan.htm')"/></p>
<p class="br"></p>
</div>
<p class="bl"></p>
<p class="tail" id="tail">
	<input type="button" class="button L T T_save" value="Save" id="submitBtn" onclick="doSubmit()" />
</p>
</div>
<script language="javascript" type="text/javascript">$.loadHelp();var filterlist;init();</script>

